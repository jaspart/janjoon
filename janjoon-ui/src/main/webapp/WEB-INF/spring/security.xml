<?xml version="1.0" encoding="UTF-8"?>
<b:beans xmlns:b="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://www.springframework.org/schema/security"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">
  
 <global-method-security proxy-target-class="true" pre-post-annotations="enabled"/>
 
	<context:component-scan base-package="com.funder.janjoonweb.ui.mb" />	
	<context:component-scan base-package="com.funder.janjoonweb.ui.securite" />	
		
	<context:spring-configured/>	
	<context:component-scan base-package="com.funder.janjoonweb.domain">
        <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
        <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    </context:component-scan>
    
    <http security="none" pattern="../resources/**"/>
    <http security="none" pattern="/org.richfaces.resources/**"/>
    <http security="none" pattern="../templates/**"/>
    
    <http auto-config="true"
        use-expressions="true"
        entry-point-ref="entryPoint">
        <intercept-url pattern="/pages/main.jsf" access="permitAll"/>
        <intercept-url pattern="/pages/JJLogin.jsf" access="permitAll"/>
        <intercept-url pattern="/pages/**" access="hasRole('ROLE_USER')"/>
        <logout logout-success-url="/pages/JJLogin.jsf" invalidate-session="true"/>
        <form-login login-page="/pages/JJLogin.jsf"
                authentication-failure-url="/pages/JJLogin.jsf"
                default-target-url="/"
                always-use-default-target="true"/>
        <expression-handler ref="jsfWebExpressionHandler"/>
    </http> 
        
   <authentication-manager alias="authenticationManager" >
        <authentication-provider >
        <user-service>
        <user name="janjoon" password="BeHappy2012" authorities="ROLE_ADMIN" />
        </user-service>
        </authentication-provider>		
    </authentication-manager>
        
    <b:bean id="jsfWebExpressionHandler" class="com.funder.janjoonweb.ui.securite.JsfDefaultWebSecurityExpressionhandler"/>
    
</b:beans>
