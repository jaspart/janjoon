<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:sec="http://www.springframework.org/security/tags">
<ui:composition>
	<title>#{messages.label_appName}</title>
	<h:outputStylesheet library="css" name="standard.css" />
	<h:outputScript library="js" name="calendar.js" />
	<f:event listener="#{loginBean.loadingMain}" type="preRenderView" />
	<h:form prependId="false" id="headerForm">

		<p:growl id="growlHeader" showDetail="true" sticky="true" life="2000"/>
		<h:panelGrid id="panelMenu" columns="3" cellpadding="2"
			style="background-color:white;">


			<h:link outcome="main">
				<p:graphicImage library="images" name="janjoon_logo.png"
					styleClass="banner" alt="JanJoon Home" style="float: left;" />
			</h:link>

			<p:tabMenu id="tabMenu" name="content" style="float: none;"
				activeIndex="-1">

				<p:menuitem value="" icon="ui-icon-home"
					url="/pages/main.jsf?faces-redirect=true" />

				<p:menuitem value="Project"
					url="/pages/planning.jsf?faces-redirect=true"
					icon="ui-icon-clipboard" update=":contentPanel" />

				<p:menuitem value="Specs"
					url="/pages/specifications.jsf?faces-redirect=true"
					icon="ui-icon-document" update=":contentPanel" />

				<p:menuitem value="Bugs" url="/pages/bugs.jsf?faces-redirect=true"
					icon="ui-icon-gear" />

				<p:menuitem value="Dev"
					url="/pages/development.jsf?faces-redirect=true"
					icon="ui-icon-wrench" rendered="#{!loginBean.enable}" />

				<p:menuitem id="devAction" value="Dev"
					actionListener="#{loginBean.redirectToDev}" update="growlHeader"
					icon="ui-icon-wrench" rendered="#{loginBean.enable}" />

				<p:menuitem value="Delivery"
					url="/pages/delivery.jsf?faces-redirect=true" icon="ui-icon-star" />

				<p:menuitem value="Teams" url="/pages/teams.jsf?faces-redirect=true"
					icon="ui-icon-person" />

				<p:menuitem value="Stats" url="/pages/stats.jsf?faces-redirect=true"
					icon="ui-icon-arrowreturnthick-1-n" />

				<p:menuitem value="Admin"
					url="/pages/administration.jsf?faces-redirect=true"
					icon="ui-icon-key" update=":contentPanel" />

				<p:menuitem value="Temp" url="/pages/temp.jsf?faces-redirect=true"
					update=":contentPanel" />

			</p:tabMenu>

			<h:panelGrid columns="2" cellpadding="2" align="right"
				style="float: right;">
				<h:outputLink value="logout.jsf" action="#{loginBean.logout}"
					rendered="#{loginBean.enable}">Logout:</h:outputLink>
				<h:outputText value="#{loginBean.contact.name}"
					rendered="#{loginBean.enable}"></h:outputText>

				<h:outputText value="Project:" />
				<p:selectOneMenu id="projectSelectOneMenu"
					value="#{jJProjectBean.project}" panelStyle="width:120px"
					effect="fade" style="width:160px" filter="true"
					valueChangeListener="#{loginBean.changeEvent}"
					filterMatchMode="startsWith">

					<f:converter
						converterId="com.starit.janjoonweb.ui.mb.converter.JJProjectConverter" />

					<f:selectItems value="#{jJProjectBean.projectList}" var="p"
						itemLabel="#{p.name}" itemValue="#{p}" />

					<p:ajax process="@this" update=":contentPanel" />

				</p:selectOneMenu>

				<h:outputText value="Product:" />
				<p:selectOneMenu id="productSelectOneMenu"
					value="#{jJProductBean.product}" panelStyle="width:120px"
					effect="fade" style="width:160px" filter="true"
					valueChangeListener="#{loginBean.changeEvent}"
					filterMatchMode="startsWith">
					<f:converter
						converterId="com.starit.janjoonweb.ui.mb.converter.JJProductConverter" />
					<f:selectItem itemValue="#{null}" itemLabel="-- Select One --" />
					<f:selectItems value="#{jJProductBean.productList}" var="p"
						itemLabel="#{p.name}" itemValue="#{p}" />
					<p:ajax process="@this" update=":contentPanel,versionSelectOneMenu" />
				</p:selectOneMenu>

				<h:outputText value="Version:" />
				<p:selectOneMenu id="versionSelectOneMenu"
					value="#{jJVersionBean.version}" panelStyle="width:120px"
					effect="fade" style="width:160px" filter="true"
					valueChangeListener="#{loginBean.changeEvent}"
					filterMatchMode="startsWith" disabled="#{jJVersionBean.disabled}">

					<f:converter
						converterId="com.starit.janjoonweb.ui.mb.converter.JJVersionConverter" />

					<f:selectItem itemValue="#{null}" itemLabel="-- Select One --" />

					<f:selectItems value="#{jJVersionBean.versionList}" var="v"
						itemLabel="#{v.name}" itemValue="#{v}" />

					<p:ajax process="@this" update=":contentPanel" />
				</p:selectOneMenu>
			</h:panelGrid>
		</h:panelGrid>
		<p:sticky target="panelMenu" />
	</h:form>
</ui:composition>
</html>
