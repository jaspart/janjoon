<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition>
	<title>#{messages.label_appName}</title>
	<h:outputStylesheet library="css" name="standard.css" />
	<h:outputScript library="js" name="calendar.js" />
	<f:event listener="#{loginBean.loadingMain}" type="preRenderView" />

	<h:form id="headerForm">

		<p:growl id="growlHeader" showDetail="true" life="1500" />
		<h:panelGrid id="panelHeader" columns="2" cellpadding="2"
			style="background-color:white;width:100%;">

			<h:link outcome="main">
				<p:graphicImage library="images" name="janjoon_logo.png"
					rendered="#{loginBean.logoUrl == null}" styleClass="banner"
					alt="JanJoon Home" style="float: left;" />
				<p:graphicImage value="#{loginBean.logoUrl}"
					rendered="#{loginBean.logoUrl != null}" styleClass="banner"
					style="float: left;height: 100px;width: 100px;" />
			</h:link>


			<h:panelGrid id="panelMenu" columns="1" cellpadding="2"
				style="background-color:white;width:100%;">

				<h:panelGrid columns="8" align="left" style="width:100%;">

					<!--h:outputText value="#{messages.header_project_label}:" /-->
					<p:selectOneMenu id="projectSelectOneMenu"
						value="#{jJProjectBean.project}" panelStyle="width:120px"
						effect="fade" style="width:160px" filter="true"
						valueChangeListener="#{loginBean.changeEvent}"
						filterMatchMode="startsWith"
						converter="com.starit.janjoonweb.ui.mb.converter.JJProjectConverter">

						<f:selectItem itemValue="#{null}" itemLabel="AnyProject" />
						<f:selectItems value="#{jJProjectBean.projectList}" var="p"
							itemLabel="#{p.name}" itemValue="#{p}" />
						<p:ajax onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"
							update=":contentPanel tabMenu :scrollRight :messagePanel " />
					</p:selectOneMenu>

					<!--h:outputText value="#{messages.header_product_label}:" /-->
					<p:selectOneMenu id="productSelectOneMenu"
						value="#{jJProductBean.product}" panelStyle="width:120px"
						effect="fade" style="width:160px" filter="true"
						valueChangeListener="#{loginBean.changeEvent}"
						filterMatchMode="startsWith"
						converter="com.starit.janjoonweb.ui.mb.converter.JJProductConverter">

						<f:selectItem itemValue="#{null}" itemLabel="AnyProduct" />
						<f:selectItems value="#{jJProductBean.productList}" var="p"
							itemLabel="#{p.name}" itemValue="#{p}" />
						<p:ajax onstart="PF('blockUIWidget').block()"
							update="versionSelectOneMenu :contentPanel :scrollRight :messagePanel"
							oncomplete="PF('blockUIWidget').unblock()" />
					</p:selectOneMenu>

					<!--h:outputText value="#{messages.header_version_label}:" /-->
					<p:selectOneMenu id="versionSelectOneMenu"
						value="#{jJVersionBean.version}" panelStyle="width:120px"
						effect="fade" style="width:160px" filter="true"
						valueChangeListener="#{loginBean.changeEvent}"
						converter="com.starit.janjoonweb.ui.mb.converter.JJVersionConverter"
						filterMatchMode="startsWith" disabled="#{jJVersionBean.disabled}">

						<f:selectItem itemValue="#{null}" itemLabel="AnyVersion" />

						<f:selectItems value="#{jJVersionBean.versionList}" var="v"
							itemLabel="#{v.name}" itemValue="#{v}" />

						<p:ajax onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"
							update=":contentPanel " />
					</p:selectOneMenu>

					<p:splitButton
						value="#{loginBean.contact.firstname} #{loginBean.contact.name}"
						rendered="#{loginBean.enable}" style="right: 0px;">
						<p:graphicImage value="#{loginBean.pictureUrl}"
							rendered="#{loginBean.pictureUrl != null}" 
							style="float: left;height: 50px;width: 50px;" />
						<p:menuitem value="#{messages.header_config_link}"
							icon="ui-icon-person"
							url="/pages/contactConfig.jsf?faces-redirect=true" />
						<p:menuitem value="#{messages.header_logout_link}"
							url="logout.jsf" actionListener="#{loginBean.logout}"
							icon="ui-icon-extlink" />
					</p:splitButton>

				</h:panelGrid>

				<p:tabMenu id="tabMenu" name="content" style="float: none;"
					activeIndex="#{loginBean.menuIndex}">

					<p:menuitem value="&#9776;" id="pnl-basic"
						onclick="PF('pnl-basic').show('#{component.clientId}')"
						style="font-weight: bold;" rendered="#{loginBean.mobile}"
						update=":overlayPanel" />

					<p:menuitem value="" icon="ui-icon-home"
						rendered="#{!loginBean.mobile}"
						url="/pages/main.jsf?faces-redirect=true" />

					<p:menuitem value="#{messages.header_project_menuitem}"
						url="/pages/project1.jsf?faces-redirect=true"
						icon="ui-icon-clipboard" update=":contentPanel"
						rendered="#{!loginBean.enable and !loginBean.mobile}" />

					<p:menuitem id="proAction"
						value="#{messages.header_project_menuitem}"
						disabled="#{!loginBean.authorisationService.rProject}"
						title="#{loginBean.authorisationService.rProjectMSG}"
						onstart="PF('blockUIWidget').block()"
						actionListener="#{loginBean.redirection}" update="growlHeader"
						icon="ui-icon-clipboard"
						rendered="#{loginBean.enable and !loginBean.mobile}" />

					<p:menuitem value="#{messages.header_spec_menuitem}"
						disabled="#{!loginBean.authorisationService.rRequiement}"
						title="#{loginBean.authorisationService.rRequiementMSG}"
						url="/pages/specifications.jsf?faces-redirect=true"
						icon="ui-icon-document"
						rendered="#{loginBean.enable and !loginBean.mobile}" />

					<p:menuitem value="#{messages.header_spec_menuitem}"
						url="/pages/specifications.jsf?faces-redirect=true"
						icon="ui-icon-document"
						rendered="#{!loginBean.enable and !loginBean.mobile}" />

					<p:menuitem value="#{messages.header_bug_menuitem}"
						rendered="#{!loginBean.mobile}"
						url="/pages/bugs.jsf?faces-redirect=true" icon="ui-icon-gear" />

					<p:menuitem value="#{messages.header_dev_menuitem}"
						url="/pages/development.jsf?faces-redirect=true"
						icon="ui-icon-wrench"
						rendered="#{!loginBean.enable and !loginBean.mobile}" />

					<p:menuitem id="devAction" value="#{messages.header_dev_menuitem}"
						onstart="PF('blockUIWidget').block()"
						disabled="#{!loginBean.authorisationService.rwDev}"
						title="#{loginBean.authorisationService.rwDevMSG}"
						actionListener="#{loginBean.redirectToDev}" update="growlHeader"
						icon="ui-icon-wrench"
						rendered="#{loginBean.enable and !loginBean.mobile}" />

					<p:menuitem value="#{messages.header_test_menuitem}"
						url="/pages/test.jsf?faces-redirect=true" icon="ui-icon-check"
						update=":contentPanel"
						rendered="#{!loginBean.enable and !loginBean.mobile}" />

					<p:menuitem id="testAction"
						disabled="#{!loginBean.authorisationService.rTest}"
						title="#{loginBean.authorisationService.rTestMSG}"
						value="#{messages.header_test_menuitem}"
						onstart="PF('blockUIWidget').block()"
						actionListener="#{loginBean.redirection}" update="growlHeader"
						icon="ui-icon-clipboard"
						rendered="#{loginBean.enable and !loginBean.mobile}" />

					<p:menuitem value="#{messages.header_delivery_menuitem}"
						disabled="#{!loginBean.authorisationService.rBuild}"
						title="#{loginBean.authorisationService.rBuildMSG}"
						rendered="#{loginBean.enable and !loginBean.mobile}"
						url="/pages/delivery.jsf?faces-redirect=true" icon="ui-icon-star" />

					<p:menuitem value="#{messages.header_delivery_menuitem}"
						rendered="#{!loginBean.enable and !loginBean.mobile}"
						url="/pages/delivery.jsf?faces-redirect=true" icon="ui-icon-star" />

					<p:menuitem value="#{messages.header_team_menuitem}"
						rendered="#{!loginBean.mobile}"
						url="/pages/teams.jsf?faces-redirect=true" icon="ui-icon-person" />

					<p:menuitem value="#{messages.header_stat_menuitem}"
						url="/pages/stats.jsf?faces-redirect=true"
						icon="ui-icon-arrowreturnthick-1-n"
						rendered="#{!loginBean.enable and !loginBean.mobile}" />

					<p:menuitem id="statsAction"
						value="#{messages.header_stat_menuitem}"
						onstart="PF('blockUIWidget').block()"
						actionListener="#{loginBean.redirection}" update="growlHeader"
						icon="ui-icon-clipboard"
						rendered="#{loginBean.enable and !loginBean.mobile}" />

					<p:menuitem value="#{messages.header_admin_menuitem}"
						rendered="#{!loginBean.mobile}"
						url="/pages/administration.jsf?faces-redirect=true"
						icon="ui-icon-key" update=":contentPanel" />

				</p:tabMenu>

			</h:panelGrid>
		</h:panelGrid>
		<!--p:sticky target="panelMenu" /-->
	</h:form>
</ui:composition>
</html>
