<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:pr="http://primefaces.org/rio">

	<title>#{messages.label_appName}</title>
	<h:outputStylesheet library="css" name="standard.css" />
	<h:outputScript library="js" name="calendar.js" />
	<f:event listener="#{loginBean.loadingMain}" type="preRenderView" />
	<div class="Animated05" id="layout-menu-cover">
		<h:form id="headerForm">
			<p:remoteCommand name="updateCommunicationButton"
				update=":messageCreationForm communicationButton :communicationButton" />

			<p:commandButton id="communicationButton" icon="ui-icon-comment"
				value="#{loginBean.messageCount}" style="display:none;"
				oncomplete="PF('communicationPanel').show();"
				title="#{message.header_communication_label}"
				rendered="#{loginBean.enable}" />
			<div style="height: 80px"></div>

			<p:selectOneMenu id="projectSelectOneMenu"
				panelStyleClass="headerSelectOneMenuClass"
				value="#{jJProjectBean.project}" effect="fade" style="width:130px"
				filter="#{!loginBean.mobile}"
				valueChangeListener="#{loginBean.changeEvent}"
				filterMatchMode="contains"
				converter="com.starit.janjoonweb.ui.mb.converter.JJProjectConverter">
				<f:selectItem itemValue="#{null}"
					itemLabel="#{messages.header_any_project}" />
				<f:selectItems value="#{jJProjectBean.projectList}" var="p"
					itemLabel="#{p.name}" itemValue="#{p}" />
				<p:ajax
					update=":contentPanel tabMenu :scrollRight communicationButton :growlForm" />
			</p:selectOneMenu>

			<p:commandButton styleClass="GrayButton"
				disabled="#{!loginBean.authorisationService.adminProject}"
				actionListener="#{jJProjectBean.newProject}"
				update=":projectDialogHeader :projectDialogForm"
				icon="fa fa-plus Fs20" resetValues="true"
				oncomplete="PF('projectDialogWidget').show()" />

			<p:selectOneMenu id="productSelectOneMenu"
				value="#{jJProductBean.product}"
				panelStyleClass="headerSelectOneMenuClass" effect="fade"
				style="width:130px" filter="#{!loginBean.mobile}"
				valueChangeListener="#{loginBean.changeEvent}"
				filterMatchMode="contains"
				converter="com.starit.janjoonweb.ui.mb.converter.JJProductConverter">

				<f:selectItem itemValue="#{null}"
					itemLabel="#{messages.header_any_product}" />
				<f:selectItems value="#{jJProductBean.productList}" var="p"
					itemLabel="#{p.name}" itemValue="#{p}" />
				<p:ajax
					update="versionSelectOneMenu :contentPanel tabMenu :scrollRight communicationButton :growlForm" />
			</p:selectOneMenu>
			<p:commandButton styleClass="GrayButton" resetValues="true"
				disabled="#{!loginBean.authorisationService.adminProduct}"
				actionListener="#{jJProductBean.newProduct(jJVersionBean)}"
				update=":productDialogHeader :productDialogForm"
				oncomplete="PF('productDialogWidget').show()" icon="fa fa-plus Fs20" />

			<p:selectOneMenu id="versionSelectOneMenu"
				value="#{jJVersionBean.version}" style="width:130px;"
				panelStyleClass="headerSelectOneMenuClass" effect="fade"
				filter="#{!loginBean.mobile}"
				valueChangeListener="#{loginBean.changeEvent}"
				converter="com.starit.janjoonweb.ui.mb.converter.JJVersionConverter"
				filterMatchMode="contains" disabled="#{jJVersionBean.disabled}">

				<f:selectItem itemValue="#{null}"
					itemLabel="#{messages.header_any_version}" />

				<f:selectItems value="#{jJVersionBean.versionList}" var="v"
					itemLabel="#{v.name}" itemValue="#{v}" />

				<p:ajax update=":contentPanel :growlForm addVersionButton" />
			</p:selectOneMenu>
			<p:commandButton id="addVersionButton" icon="fa fa-pencil Fs16" styleClass="GrayButton"
				oncomplete="PF('productDialogWidget').show()" resetValues="true"
				title="#{messages.label_edit}" disabled="#{jJVersionBean.version == null}"
				action="#{jJProductBean.editProduct(jJVersionBean)}"
				update=":productDialogHeader :productDialogForm">
				<f:setPropertyActionListener value="#{jJProductBean.product}"
					target="#{jJProductBean.productAdmin}" />
			</p:commandButton>


			<div class="Separator"></div>
			<pr:menu id="tabMenu" name="content" style="float: none;"
				binding="#{tab}" rendered="#{loginBean.enable}">

				<p:menuitem value="Home" icon="icon-planet29 Gray"
					url="/pages/main.jsf?faces-redirect=true" />

				<p:menuitem id="proAction"
					value="#{messages.header_project_menuitem}"
					title="#{loginBean.authorisationService.rProjectMSG}"
					actionListener="#{loginBean.redirection}" update=":growlForm"
					icon="icon-connection21 Purple" style="min-width: 80px;"
					rendered="#{loginBean.authorisationService.rProject}" />

				<p:menuitem value="#{messages.header_spec_menuitem}"
					title="#{loginBean.authorisationService.rRequiementMSG}"
					url="/pages/specifications.jsf?faces-redirect=true"
					icon="icon-underline6 Blue"
					rendered="#{loginBean.authorisationService.rRequiement}" />

				<p:menuitem value="#{messages.header_bug_menuitem}"
					rendered="#{loginBean.authorisationService.rBug}"
					title="#{loginBean.authorisationService.rBugMSG}"
					url="/pages/bugs.jsf?faces-redirect=true" icon="icon-bug18 Red" />

				<p:menuitem id="devAction" value="#{messages.header_dev_menuitem}"
					title="#{loginBean.authorisationService.rwDevMSG}"
					actionListener="#{loginBean.redirectToDev}" update=":growlForm"
					icon="icon-browser"
					rendered="#{loginBean.authorisationService.rwDev}" />

				<p:menuitem id="testAction"
					title="#{loginBean.authorisationService.rTestMSG}"
					value="#{messages.header_test_menuitem}"
					actionListener="#{loginBean.redirection}" update=":growlForm"
					icon="icon-tick7 Green"
					rendered="#{loginBean.authorisationService.rTest}" />
					
				<p:menuitem value="#{messages.header_risk_menuitem}"
					title="#{messages.header_risk_menuitemhelp}"
					url="/pages/risk.jsf?faces-redirect=true"
					icon="icon-warning37 Red" />

				<p:menuitem value="#{messages.header_exploitation_menuitem}"
					title="#{messages.header_exploitation_menuitemhelp}"
					rendered="false" style="min-width: 80px;"
					url="/pages/exploitation.jsf?faces-redirect=true"
					icon="ui-icon-suitcase" />

				<p:menuitem value="#{messages.header_delivery_menuitem}"
					rendered="#{loginBean.authorisationService.rBuild}"
					title="#{loginBean.authorisationService.rBuildMSG}"
					url="/pages/delivery.jsf?faces-redirect=true"
					icon="icon-inbox-alt Marron" />

				<p:menuitem value="#{messages.header_team_menuitem}"
					rendered="#{loginBean.authorisationService.rProject}"
					title="#{messages.header_team_menuitem}"
					url="/pages/teams.jsf?faces-redirect=true"
					icon="icon-users GoldYellow" />

				<p:menuitem id="statsAction"
					title="#{messages.header_stat_menuitemhelp}"
					value="#{messages.header_stat_menuitem}"
					actionListener="#{loginBean.redirection}" update=":growlForm"
					icon="icon-google130 Khaki"
					rendered="#{loginBean.authorisationService.rProject}" />

				<p:menuitem value="#{messages.header_admin_menuitem}"
					title="#{messages.header_admin_menuitemhelp}"
					rendered="#{loginBean.authorisationService.renderAdmin}"
					url="/pages/administration.jsf?faces-redirect=true"
					icon="icon-https Marron" update=":contentPanel" />
			</pr:menu>
			<div class="ContainerIndent Fs12 BoldGray FontRobotoRegular">
				<h:panelGrid columns="2" cellspacing="0" cellpadding="0"
					width="100%">
					<p:row>
						<p:column width="50%">
							<h:outputText value=" Version 3.0-BUILD_NUMBER Lithium" />
						</p:column>
						<p:column width="50%" style="text-align: right;">
							<h:outputLink value="https://www.starit.fr">
								<h:graphicImage library="images" name="starit-logo.png"
									alt="StarIT - Janjoon" />
							</h:outputLink>
						</p:column>
					</p:row>
				</h:panelGrid>
			</div>
		</h:form>
	</div>
</ui:composition>
