<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:pr="http://primefaces.org/rio">

	<title>#{messages.label_appName}</title>
	<h:outputStylesheet library="css" name="standard.css" />
	<h:outputScript library="js" name="calendar.js" />
	<h:outputScript library="js" name="ckEditor.js" />
	<f:event listener="#{loginBean.loadingMain}" type="preRenderView" />

	<h:form id="headerForm">
		<p:remoteCommand name="updateCommunicationButton"
			update=":messageCreationForm communicationButton :communicationButton" />

		<p:commandButton id="communicationButton" icon="ui-icon-comment"
			value="#{loginBean.messageCount}" style="display:none;"
			oncomplete="PF('communicationPanel').show();"
			title="#{message.header_communication_label}"
			rendered="#{loginBean.enable}" />

		<div class="Animated05" id="layout-menu-cover">
			<!--div id="panelMenu"-->
			<div style="height: 100px"></div>
			<p:selectOneMenu id="projectSelectOneMenu"
				value="#{jJProjectBean.project}" panelStyle="width:120px"
				effect="fade" style="width:160px" filter="true"
				valueChangeListener="#{loginBean.changeEvent}"
				filterMatchMode="startsWith"
				converter="com.starit.janjoonweb.ui.mb.converter.JJProjectConverter">

				<f:selectItem itemValue="#{null}" itemLabel="AnyProject" />
				<f:selectItems value="#{jJProjectBean.projectList}" var="p"
					itemLabel="#{p.name}" itemValue="#{p}" />
				<p:ajax onstart="PF('blockUIWidget').block()"
					oncomplete="PF('blockUIWidget').unblock()"
					update=":contentPanel tabMenu :scrollRight communicationButton :growlForm" />
			</p:selectOneMenu>

			<p:selectOneMenu id="productSelectOneMenu"
				value="#{jJProductBean.product}" panelStyle="width:120px"
				effect="fade" style="width:160px" filter="true"
				valueChangeListener="#{loginBean.changeEvent}"
				filterMatchMode="startsWith"
				converter="com.starit.janjoonweb.ui.mb.converter.JJProductConverter">

				<f:selectItem itemValue="#{null}" itemLabel="AnyProduct" />
				<f:selectItems value="#{jJProductBean.productList}" var="p"
					itemLabel="#{p.name}" itemValue="#{p}" />
				<p:ajax onstart="PF('blockUIWidget').block()"
					update="versionSelectOneMenu :contentPanel tabMenu :scrollRight communicationButton :growlForm"
					oncomplete="PF('blockUIWidget').unblock()" />
			</p:selectOneMenu>

			<p:selectOneMenu id="versionSelectOneMenu"
				value="#{jJVersionBean.version}" panelStyle="width:120px"
				effect="fade" style="width:160px" filter="true"
				valueChangeListener="#{loginBean.changeEvent}"
				converter="com.starit.janjoonweb.ui.mb.converter.JJVersionConverter"
				filterMatchMode="startsWith" disabled="#{jJVersionBean.disabled}">

				<f:selectItem itemValue="#{null}" itemLabel="AnyVersion" />

				<f:selectItems value="#{jJVersionBean.versionList}" var="v"
					itemLabel="#{v.name}" itemValue="#{v}" />

				<p:ajax onstart="PF('blockUIWidget').block()"
					oncomplete="PF('blockUIWidget').unblock()"
					update=":contentPanel :growlForm" />
			</p:selectOneMenu>

			<div class="Separator"></div>
			<pr:menu id="tabMenu" name="content" style="float: none;"
				binding="#{tab}" rendered="#{loginBean.enable}">

				<p:menuitem value="Home" icon="icon-planet29"
					url="/pages/main.jsf?faces-redirect=true" />

				<p:menuitem id="proAction" 
					value="#{messages.header_project_menuitem}"
					title="#{loginBean.authorisationService.rProjectMSG}"
					onstart="PF('blockUIWidget').block()"
					actionListener="#{loginBean.redirection}" update=":growlForm"
					icon="icon-calendar" style="min-width: 80px;"
					rendered="#{loginBean.authorisationService.rProject}" />

				<p:menuitem value="#{messages.header_spec_menuitem}"
					title="#{loginBean.authorisationService.rRequiementMSG}"
					url="/pages/specifications.jsf?faces-redirect=true"
					icon="icon-list"
					rendered="#{loginBean.authorisationService.rRequiement}" />

				<p:menuitem value="#{messages.header_bug_menuitem}"
					rendered="#{loginBean.authorisationService.rBug}"
					title="#{loginBean.authorisationService.rBugMSG}"
					url="/pages/bugs.jsf?faces-redirect=true" icon="icon-bug18" />
				<p:menuitem id="devAction" value="#{messages.header_dev_menuitem}"
					onstart="PF('blockUIWidget').block()"
					title="#{loginBean.authorisationService.rwDevMSG}"
					actionListener="#{loginBean.redirectToDev}" update=":growlForm"
					icon="icon-developer2"
					rendered="#{loginBean.authorisationService.rwDev}" />

				<p:menuitem id="testAction"
					title="#{loginBean.authorisationService.rTestMSG}"
					value="#{messages.header_test_menuitem}"
					onstart="PF('blockUIWidget').block()"
					actionListener="#{loginBean.redirection}" update=":growlForm"
					icon="icon-check51"
					rendered="#{loginBean.authorisationService.rTest}" />

				<p:menuitem value="#{messages.header_exploitation_menuitem}"
					title="#{messages.header_exploitation_menuitemhelp}"
					rendered="false" style="min-width: 80px;"
					url="/pages/exploitation.jsf?faces-redirect=true"
					icon="ui-icon-suitcase" />

				<p:menuitem value="#{messages.header_delivery_menuitem}"
					rendered="#{loginBean.authorisationService.rBuild}"
					title="#{loginBean.authorisationService.rBuildMSG}"
					url="/pages/delivery.jsf?faces-redirect=true" icon="icon-inbox-alt" />

				<p:menuitem value="#{messages.header_team_menuitem}"
					rendered="#{loginBean.authorisationService.rProject}"
					title="#{messages.header_team_menuitem}"
					url="/pages/teams.jsf?faces-redirect=true" icon="icon-round58" />

				<p:menuitem id="statsAction"
					title="#{messages.header_stat_menuitemhelp}"
					value="#{messages.header_stat_menuitem}"
					onstart="PF('blockUIWidget').block()"
					actionListener="#{loginBean.redirection}" update=":growlForm"
					icon="icon-calculator"
					rendered="#{loginBean.authorisationService.rProject}" />

				<p:menuitem value="#{messages.header_admin_menuitem}"
					title="#{messages.header_admin_menuitemhelp}"
					rendered="#{loginBean.authorisationService.renderAdmin}"
					url="/pages/administration.jsf?faces-redirect=true"
					icon="icon-https" update=":contentPanel" />
			</pr:menu>
		</div>
		<!--/h:panelGrid-->
	</h:form>
</ui:composition>
