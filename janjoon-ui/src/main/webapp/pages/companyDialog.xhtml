<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition>
	<pe:blockUI widgetVar="EditCalendarBlockUIWidget"
		target="companyDialogPanel">
		<h:panelGrid columns="2">
			<p:graphicImage name="images/preloader.gif" library="rioLayout"
				style="vertical-align: middle;" />
			<h:outputText value="#{messages.label_refresh}"
				style="white-space: nowrap;" />
		</h:panelGrid>
	</pe:blockUI>
	<h:panelGroup id="companyDialogPanel" layout="block"
		styleClass="Container" style="max-width: 800px;">
		<h:form id="companyDialogForm" enctype="multipart/form-data">
			<h:panelGroup layout="block" styleClass="Container100">
				<p:messages id="msg" showDetail="false" closable="true" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container100">
				<p:tabView widgetVar="companyTabView" scrollable="false">
					<p:ajax event="tabChange" update=":companyDialogForm:msg" />
					<p:tab title="#{messages.admin_company_menuitem}">
						<h:panelGroup layout="block" styleClass="Container">
							<h:panelGroup layout="block" styleClass="Container100 ui-fluid">
								<h:panelGroup layout="block" styleClass="Container20">
									<h:panelGroup layout="block" styleClass="ContainerIndentLabel">
										<p:outputLabel value="#{messages.label_name} :" for="name" />
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block" styleClass="Container80">
									<h:panelGroup layout="block" styleClass="ContainerIndent">
										<p:inputText id="name" value="#{jJCompanyBean.companie.name}"
											label="#{messages.admin_company_new_name_label}"
											requiredMessage="#{messages.label_name_required_alert}"
											required="true" widgetVar="nameWidget">
											<f:validateLength maximum="100" />
											<p:ajax event="blur" update="compLogo" />
										</p:inputText>
									</h:panelGroup>
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="Container100">
								<h:panelGroup layout="block" style="height:100px;"
									styleClass="Responsive Container20 TexAlCenter BorderAll">
									<h:panelGroup layout="block" styleClass="ContainerIndent">
										<p:graphicImage styleClass="avatar" cache="false"
											value="#{imageStreamer.imageComp}" style="margin-top: 7%;">
											<f:param name="CompId" value="#{jJCompanyBean.companie.id}" />
											<f:param name="Edit" value="true" />
										</p:graphicImage>
									</h:panelGroup>
								</h:panelGroup>
								<h:panelGroup layout="block"
									styleClass="Responsive100 Container75 TexAlCenter" style="height:100px;">
									<h:panelGroup layout="block" styleClass="ContainerIndent">
										<p:fileUpload id="compLogo" fileLimit="1"
											styleClass="customCompanyFileUpload"
											disabled="#{empty jJCompanyBean.companie.name}"
											fileUploadListener="#{licenseBean.handleCompLogoUpload}"
											mode="advanced" dragDropSupport="false"
											update=":companyDialogForm:msg" sizeLimit="1000000"
											allowTypes="/(gif|png|ico|jpeg)$/" />
									</h:panelGroup>
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="Container100 ui-fluid"
								style="min-height: 220px;" rendered="#{!loginBean.mobile}">
								<h:panelGroup layout="block" styleClass="ContainerIndent">
									<p:outputLabel value="Description" for="jJCompanyDescription"
										rendered="#{!loginBean.mobile}" />
									<pe:ckEditor id="jJCompanyDescription" height="150px"
										toolbar="#{imageStreamer.ckEditorToolBar}"
										rendered="#{!loginBean.mobile}" width="100%"
										customConfig="#{request.contextPath}/resources/js/ckEditor.js"
										value="#{jJCompanyBean.companie.description}" required="true"
										requiredMessage="#{messages.label_desc_required_alert}" />
								</h:panelGroup>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="Container100 ui-fluid"
								rendered="#{loginBean.mobile}">
								<h:panelGroup layout="block" styleClass="ContainerIndent">
									<p:inputTextarea id="jJCompanyMobileDescription"
										rendered="#{loginBean.mobile}"
										value="#{jJCompanyBean.companie.description}" required="true"
										requiredMessage="#{messages.label_desc_required_alert}" />
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</p:tab>
					<p:tab disabled="#{jJCompanyBean.companie.id == null}"
						title="#{messages.admin_company_table_editcalendar_tooltip}">
						<h:panelGroup layout="block" styleClass="Container ui-fluid">
							<h:panelGroup layout="block"
								styleClass="Container70 Responsive100">
								<p:dataTable value="#{jJCompanyBean.workDays}" var="day"
									emptyMessage="#{messages.label_notRecordFound}"
									rendered="#{jJCompanyBean.workDays != null}">
									<p:columnGroup type="header">
										<p:row>
											<p:column colspan="5" style="text-align: left;"
												headerText="#{messages.admin_company_calendarHeader}" />
										</p:row>
										<p:row>
											<p:column rowspan="2" width="40%"
												headerText="#{messages.contact_dataTable_day}" />
											<p:column colspan="2" rowspan="1" width="30%"
												headerText="#{messages.contact_datatable_morning}" />
											<p:column colspan="2" rowspan="1" width="30%"
												headerText="#{messages.contact_datatable_afternoon}" />
										</p:row>
										<p:row>
											<p:column width="15%"
												headerText="#{messages.contact_dataTable_from}" />
											<p:column width="15%"
												headerText="#{messages.contact_dataTable_to}" />
											<p:column width="15%"
												headerText="#{messages.contact_dataTable_from}" />
											<p:column width="15%"
												headerText="#{messages.contact_dataTable_to}" />
										</p:row>
									</p:columnGroup>
									<p:column width="40%">
										<h:outputText value="#{day.day}" />
									</p:column>
									<p:column width="15%">
										<pe:timePicker value="#{day.startDate1}"
											styleClass="customTimePicker" locale="#{localeBean.locale}"
											showDeselectButton="true" mode="popup">
											<p:ajax event="timeSelect" update=":companyDialogForm"
												listener="#{jJCompanyBean.timeSelectListener(day,1)}"
												onstart="PF('EditCalendarBlockUIWidget').block();"
												oncomplete="PF('EditCalendarBlockUIWidget').unblock();PF('companyTabView').select(1);" />
										</pe:timePicker>
									</p:column>
									<p:column width="15%">
										<pe:timePicker value="#{day.endDate1}"
											styleClass="customTimePicker" locale="#{localeBean.locale}"
											showDeselectButton="true" mode="popup">
											<p:ajax event="timeSelect" update=":companyDialogForm"
												listener="#{jJCompanyBean.timeSelectListener(day,1)}"
												onstart="PF('EditCalendarBlockUIWidget').block();"
												oncomplete="PF('EditCalendarBlockUIWidget').unblock();PF('companyTabView').select(1);" />
										</pe:timePicker>
									</p:column>
									<p:column width="15%">
										<pe:timePicker value="#{day.startDate2}"
											styleClass="customTimePicker" locale="#{localeBean.locale}"
											showDeselectButton="true" mode="popup">
											<p:ajax event="timeSelect" update=":companyDialogForm"
												listener="#{jJCompanyBean.timeSelectListener(day,2)}"
												onstart="PF('EditCalendarBlockUIWidget').block();"
												oncomplete="PF('EditCalendarBlockUIWidget').unblock();PF('companyTabView').select(1);" />
										</pe:timePicker>
									</p:column>
									<p:column width="15%">
										<pe:timePicker value="#{day.endDate2}"
											styleClass="customTimePicker" locale="#{localeBean.locale}"
											showDeselectButton="true" mode="popup">
											<p:ajax event="timeSelect" update=":companyDialogForm"
												listener="#{jJCompanyBean.timeSelectListener(day,2)}"
												onstart="PF('EditCalendarBlockUIWidget').block();"
												oncomplete="PF('EditCalendarBlockUIWidget').unblock();PF('companyTabView').select(1);" />
										</pe:timePicker>
									</p:column>
								</p:dataTable>
							</h:panelGroup>
							<h:panelGroup layout="block"
								styleClass="Container30 Responsive100">
								<h:panelGroup layout="block" styleClass="Container100">
									<p:dataList var="holy" paginator="true" rows="3"
										paginatorPosition="bottom" itemType="none"
										paginatorTemplate="{CurrentPageReport} {PreviousPageLink} {NextPageLink}"
										emptyMessage="#{messages.company_empty_holidays}"
										value="#{jJCompanyBean.holidays}" type="unordered">
										<f:facet name="header">
										<h:outputText styleClass="Fs18" value="#{jJCompanyBean.companie.name} #{messages.company_holidays}"/>										
										</f:facet>
										<h:panelGroup layout="block" styleClass="Container">
											<h:panelGroup layout="block" styleClass="Container20">
												<h:panelGroup layout="block" styleClass="ContainerIndent">
													<p:commandButton icon="fa fa-trash Fs16"
														update=":companyDialogForm"
														onstart="PF('EditCalendarBlockUIWidget').block();"
														oncomplete="PF('EditCalendarBlockUIWidget').unblock();PF('companyTabView').select(1);"
														title="#{messages.label_delete}"
														actionListener="#{jJCompanyBean.removeHoliday(holy)}"
														styleClass="littleButton" />
												</h:panelGroup>
											</h:panelGroup>
											<h:panelGroup layout="block" styleClass="Container80">
												<h:panelGroup layout="block" styleClass="Container25">
													<h:panelGroup layout="block"
														style="padding-left: 0px;padding-right: 0px;text-align: center;"
														styleClass="ContainerIndentLabel">
														<p:outputLabel value="#{messages.company_day_holidays}: " />
													</h:panelGroup>
												</h:panelGroup>
												<h:panelGroup layout="block" styleClass="Container75">
													<h:panelGroup layout="block" styleClass="ContainerIndent">
														<p:inputText readonly="true" value="#{holy}">
															<f:convertDateTime type="date"
																locale="#{localeBean.locale}" pattern="dd/MM/yyyy" />
														</p:inputText>
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
										</h:panelGroup>
										<f:facet name="footer">
											<h:panelGroup layout="block" styleClass="Container">
												<h:panelGroup layout="block" styleClass="Container40">
													<h:panelGroup layout="block"
														styleClass="ContainerIndentLabel">
														<p:outputLabel for="start"
															value="#{messages.company_day_holidays}:" />
													</h:panelGroup>
												</h:panelGroup>
												<h:panelGroup layout="block" styleClass="Container60">
													<h:panelGroup layout="block" styleClass="ContainerIndent">
														<p:calendar id="start" navigator="true" effect="slideDown"
															pattern="dd/MM/yyyy" readonlyInput="true" value="#{jJCompanyBean.day}">
															<p:ajax event="dateSelect" update="addHoliday" />
														</p:calendar>
													</h:panelGroup>
												</h:panelGroup>
												<h:panelGroup layout="block" styleClass="Container100">
													<h:panelGroup layout="block" styleClass="ContainerIndent">
														<p:commandButton id="addHoliday"
															disabled="#{jJCompanyBean.day == null}"
															update=":companyDialogForm" icon="fa fa-plus-square Fs16"
															action="#{jJCompanyBean.addHoliday}"
															onstart="PF('EditCalendarBlockUIWidget').block();"
															oncomplete="PF('EditCalendarBlockUIWidget').unblock();PF('companyTabView').select(1);"
															value="#{messages.company_new_holiday}" />
													</h:panelGroup>
												</h:panelGroup>
											</h:panelGroup>
										</f:facet>
									</p:dataList>
								</h:panelGroup>
							</h:panelGroup>
						</h:panelGroup>
					</p:tab>
				</p:tabView>
			</h:panelGroup>			
			<h:panelGroup layout="block" styleClass="ui-fluid Container100">
				<h:panelGroup layout="block" styleClass="Container50">
					<h:panelGroup layout="block" styleClass="ContainerIndent">
						<p:commandButton id="submitButton" icon="fa fa-save Fs16"
							value="#{messages.admin_company_new_save_button}"
							update="companyDialogForm :growlForm"
							title="#{messages.admin_company_new_save_button}"
							action="#{jJCompanyBean.saveCompany}" />
					</h:panelGroup>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="Container50">
					<h:panelGroup layout="block" styleClass="ContainerIndent">
						<p:commandButton id="viewCloseButton" styleClass="GrayButton"
							value="#{messages.label_cancel}"
							onclick="PF('companyDialogWidget').hide()" type="button" />
					</h:panelGroup>
				</h:panelGroup>
			</h:panelGroup>
		</h:form>
	</h:panelGroup>
</ui:composition>
</html>