<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="../templates/layout.xhtml">
	<ui:define name="content">
		<style type="text/css">
.checkBoxButton {
	height: 20px;
	width: 20px;
	color: blue !important;
	font-size: smaller !important;
	background-image: none !important;
	background-color: white !important;
	margin-left: -6px;
	margin-top: -4px;
}

.checkBoxButton .ui-button-text {
	margin-left: -4px !important;
}
</style>

		<f:event type="preRenderView"
			oncomplete="PF('blockUIWidget').unblock()"
			listener="#{jJTestcaseBean.loadData(null,null,false)}" />


		<p:layout styleClass="content"
			style="min-height:500px;overflow:hidden !important;height:700px !important;"
			stateful="true">
			<h:form id="testFormNorth">
				<p:dialog widgetVar="categoryPanel" id="categoryPanel"
					onHide="hideEvent()" styleClass="overlayPanelDialog"
					rendered="#{loginBean.mobile}" binding="#{categoryPanel}"
					closable="false">
					<c:forEach items="#{jJTestcaseBean.categoryList}" var="category">
						<p:selectBooleanButton value="#{category.checked}"
							onLabel="#{category.category.name}"
							id="Mcategory_#{category.category.id}"
							rendered="#{loginBean.mobile}"
							style="width: 150px;margin-left: 20px;height: 100px;margin-top: 20px;visibility: visible;"
							offLabel="#{category.category.name}" onIcon="ui-icon-check"
							offIcon="ui-icon-close">
							<p:ajax
								listener="#{jJTestcaseBean.loadData(categoryPanel,category.category,true)}"
								update=":testFormWest :testFormCenter :testFormNorth:categoryPanel :container :rate"
								onstart="PF('blockUIWidget').block()"
								oncomplete="PF('blockUIWidget').unblock()" />
						</p:selectBooleanButton>
						<p:tooltip for="Mcategory_#{category.category.id}"
							value="#{category.category.name}" showEffect="fade"
							hideEffect="fade" />
						<br />
					</c:forEach>
				</p:dialog>
				<p:layoutUnit position="north" style="min-height:30px;">
					<p:remoteCommand name="hideEvent" update="categoryPanel" />
					<c:forEach items="#{jJTestcaseBean.categoryList}" var="category">

						<p:selectBooleanButton value="#{category.checked}"
							onLabel="#{category.category.name}"
							id="category_#{category.category.id}"
							rendered="#{!loginBean.mobile}"
							style="visibility: visible;#{jJTestcaseBean.getMarginLeft(category)}"
							offLabel="#{category.category.name}" onIcon="ui-icon-check"
							offIcon="ui-icon-close">
							<p:ajax
								listener="#{jJTestcaseBean.loadData(null,category.category,true)}"
								update=":testFormWest :testFormCenter :testFormNorth :container :rate"
								onstart="PF('blockUIWidget').block()"
								oncomplete="PF('blockUIWidget').unblock()" />
						</p:selectBooleanButton>
						<p:tooltip for="category_#{category.category.id}"
							value="#{category.category.name}" showEffect="fade"
							hideEffect="fade" />
					</c:forEach>

					<p:commandButton value="&#9776;" id="overlayPanel"
						style="font-weight:bold; float:none; position:relative; left:10%;visibility: visible;"
						rendered="#{loginBean.mobile}" title="Category"
						action="#{loginBean.showAndHideDialog('categoryPanel',categoryPanel)}" />

					<p:commandButton
						value="#{messages.specification_import_button} XML"
						style="float: right;visibility: visible;"
						disabled="#{jJProjectBean.project == null}"
						update=":importXMLForm" onstart="PF('blockUIWidget').block()"
						oncomplete="PF('blockUIWidget').unblock();PF('testImportXMLDialogWidget').show()" />

					<p:commandButton value="#{messages.specification_video_help_title}"
						style="float: right;visibility: visible;" id="videoHelpBtn"
						icon="ui-icon-video" onclick="PF('videoHelpWidget').show()"
						type="button" />

				</p:layoutUnit>
			</h:form>
			<p:layoutUnit position="west"
				style="min-width:200px;min-height:500px;height:600px !important;width:320px !important;"
				resizable="true">
				<h:form id="testFormWest">
					<p:panelGrid>
						<p:row>
							<p:column>
								<!-- 								<h:outputText for="build" value="#{messages.test_build_label}" /> -->
								<p:selectOneMenu id="build" value="#{jJBuildBean.build}"
									effect="fade" style="width:100%;" filter="true"
									filterMatchMode="startsWith">
									<f:converter
										converterId="com.starit.janjoonweb.ui.mb.converter.JJBuildConverter" />
									<f:selectItem itemValue="#{null}"
										itemLabel="#{messages.test_build_select} #{messages.test_build_label}" />
									<f:selectItems value="#{jJBuildBean.builds}" var="bld"
										itemLabel="#{bld.name}" itemValue="#{bld}" />
									<p:ajax process="@this" partialSubmit="true"
										listener="#{jJTestcaseBean.createTestcaseTree()}"
										update=":testFormWest :testFormCenter "
										onstart="PF('blockUIWidget').block()"
										oncomplete="PF('blockUIWidget').unblock()" />
								</p:selectOneMenu>
							</p:column>
							<p:column>
								<p:dialog modal="true" widgetVar="statusDialog" header="Status"
									draggable="false" closable="false" resizable="false">
									<p:graphicImage library="images" name="ajaxloadingbar.gif"
										style="vertical-align: middle;" />
								</p:dialog>
								<p:commandButton ajax="false" id="xml"
									onclick="PrimeFaces.monitorDownload(start, stop);"
									icon="ui-icon-arrowthick-1-s">
									<p:fileDownload value="#{jJTestcaseBean.file}" />
								</p:commandButton>
								<p:tooltip for="xml" value="Export To XML" showEffect="fade"
									hideEffect="fade" />
							</p:column>
							<p:column>

								<p:commandButton ajax="false" id="exportPDF"
									title="#{messages.test_export_tooltip}"
									disabled="#{jJTestcaseBean.disabledExport}"
									style="float: right;"
									onclick="PrimeFaces.monitorDownload(start, stop);"
									icon="ui-icon-pdf">
									<p:fileDownload value="#{jJTestcaseBean.preProcessPDF}" />
								</p:commandButton>
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="3">
								<p:tree id="testCaseTree" value="#{jJTestcaseBean.rootNode}"
									var="node" selectionMode="single"
									selection="#{jJTestcaseBean.selectedNode}" dynamic="true">
									<p:ajax event="select"
										listener="#{jJTestcaseBean.onNodeSelect}"
										update=":testFormCenter :container :rate"
										onstart="PF('blockUIWidget').block()"
										oncomplete="PF('blockUIWidget').unblock()" />

									<p:treeNode>
										<h:outputText value="#{node}" styleClass="TestcaseChapter" />
									</p:treeNode>

									<p:treeNode type="TWT">
										<h:outputText value="#{node}"
											styleClass="TestcaseWithoutTeststep" />
									</p:treeNode>

									<p:treeNode type="TNE">
										<h:outputText value="#{node}" styleClass="TestcaseNotExecuted" />
									</p:treeNode>

									<p:treeNode type="TF">
										<h:outputText value="#{node}" styleClass="TestcaseFailed" />
									</p:treeNode>

									<p:treeNode type="TFWB">
										<h:outputText value="#{node}"
											styleClass="TestcaseFailedWithoutBuild" />
									</p:treeNode>

									<p:treeNode type="TS">
										<h:outputText value="#{node}" styleClass="TestcaseSuccess" />
									</p:treeNode>

									<p:treeNode type="TSWB">
										<h:outputText value="#{node}"
											styleClass="TestcaseSuccessWithoutBuild" />
									</p:treeNode>

									<p:treeNode type="TNF">
										<h:outputText value="#{node}" styleClass="TestcaseNonFini" />
									</p:treeNode>

									<p:treeNode type="TNFWB">
										<h:outputText value="#{node}"
											styleClass="TestcaseNonFiniWithoutBuild" />
									</p:treeNode>
								</p:tree>
							</p:column>
						</p:row>
					</p:panelGrid>
				</h:form>
			</p:layoutUnit>
			<p:layoutUnit position="center" resizable="false"
				style="min-height:500px;width:1060px !important;height:600px !important;">
				<p:commandButton id="colorBtn" icon="ui-icon-info" type="button"
					style="float: right;"
					title="#{messages.specification_video_help_title}" />
				<p:overlayPanel id="colorPanel" for="colorBtn" hideEffect="fade">
					<p:panelGrid>
						<f:facet name="header">
							<p:row>
								<p:column colspan="12">#{messages.test_color_title}</p:column>
							</p:row>
						</f:facet>
						<p:row>
							<p:column colspan="2" styleClass="TestcaseSuccess">
								<p:outputLabel
									value="#{messages.test_color_TestcaseSuccess_title}" />
							</p:column>

							<p:column colspan="2" styleClass="TestcaseFailed">
								<p:outputLabel
									value="#{messages.test_color_TestcaseFailed_title}" />
							</p:column>

							<p:column colspan="2" styleClass="TestcaseNotExecuted">
								<p:outputLabel
									value="#{messages.test_color_TestcaseNotExecuted_title}" />
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="2" styleClass="TestcaseWithoutTeststep">
								<p:outputLabel
									value="#{messages.test_color_TestcaseNotExecuted_title}" />
							</p:column>

							<p:column colspan="2" styleClass="TestcaseNonFini">
								<p:outputLabel
									value="#{messages.test_color_TestcaseNonFini_title}" />
							</p:column>

							<p:column colspan="2" styleClass="TestcaseChapter">
								<p:outputLabel
									value="#{messages.test_color_TestcaseChapter_title}" />
							</p:column>
						</p:row>
						<p:row>
							<p:column colspan="2" styleClass="TestcaseFailedWithoutBuild">
								<p:outputLabel
									value="#{messages.test_color_TestcaseFailedWithoutBuild_title}" />
							</p:column>

							<p:column colspan="2" styleClass="TestcaseNonFiniWithoutBuild">
								<p:outputLabel
									value="#{messages.test_color_TestcaseNonFiniWithoutBuild_title}" />
							</p:column>

							<p:column colspan="2" styleClass="TestcaseSuccessWithoutBuild">
								<p:outputLabel
									value="#{messages.test_color_TestcaseSuccessWithoutBuild_title}" />
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:overlayPanel>
				<h:form id="rate">
					<p:rating value="#{jJTestcaseBean.rated}"
						style="float: right;margin-top: 2.5%;margin-right: -2.5%;"
						stars="1" rendered="#{jJTestcaseBean.renderCommentsPanel}">
						<p:ajax event="rate" listener="#{jJTestcaseBean.onrate}"
							onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"
							update=":growlForm :messageCreationForm :headerForm:communicationButton" />
						<p:ajax event="cancel" listener="#{jJTestcaseBean.oncancel}"
							onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"
							update=":growlForm :messageCreationForm :headerForm:communicationButton" />
					</p:rating>
				</h:form>
				<h:panelGroup id="container"
					style="width: 50%;float: right;margin-right: 1%;">
					<p:fieldset legend="Comments" toggleable="true"
						rendered="#{jJTestcaseBean.renderCommentsPanel}">
						<ui:include src="/pages/communication.xhtml">
							<ui:param name="communicationList"
								value="#{jJTestcaseBean.communicationMessages}" />
							<ui:param name="field" value="#{jJTestcaseBean.testcase}" />
							<ui:param name="cols" value="50" />
						</ui:include>
					</p:fieldset>
				</h:panelGroup>
				<h:form id="testFormCenter">
					<h:outputText value="#{messages.test_select_alert}"
						rendered="#{jJTestcaseBean.rendredEmptySelection}"
						style="color: red;" />

					<p:dataTable var="columnName" value="#{jJTestcaseBean.colNames}"
						id="buildTestTable" scrollable="#{jJTestcaseBean.scrollable}"
						scrollHeight="#{jJTestcaseBean.scrollHeight}" rowIndexVar="colIdx"
						scrollWidth="#{jJTestcaseBean.scrollWidth}"
						style="table-layout: fixed;width: #{jJTestcaseBean.width};"
						rendered="#{jJTestcaseBean.rowNames != null and !jJTestcaseBean.rendredTestCaseRecaps and !jJTestcaseBean.rendredTestCaseHistorical}">


						<p:column styleClass="ui-widget-header" width="100">
							<p:commandLink value="#{columnName.name} "
								style="white-space: pre-wrap;max-height: 20px;display: block;overflow: hidden;word-wrap: break-word;text-overflow: ellipsis;font-size:smaller"
								action="#{jJTestcaseBean.testCaseInfo(columnName.id)}"
								ajax="false">
							</p:commandLink>
							<p:panel style="height: 25px;width: 30px; margin: auto;">
								<p:commandButton value="#{columnName.allBuilds ? 'V' : 'X'}"
									styleClass="checkBoxButton" disabled="true"
									update=":growlForm :testFormCenter :testFormWest :container :rate "
									actionListener="#{jJTestcaseBean.onCellEdit(columnName)}"
									onstart="PF('blockUIWidget').block()"
									oncomplete="PF('blockUIWidget').unblock();" />
							</p:panel>
						</p:column>
						<p:columns var="rowName" value="#{jJTestcaseBean.rowNames}"
							width="50" columnIndexVar="rowIdx">
							<f:facet name="header">
								<h:outputText value="Version #{rowName.name}"
									rendered="#{rowName['class'].simpleName == 'JJVersion'}" />

								<h:outputText value="Build #{rowName.name}"
									rendered="#{rowName['class'].simpleName == 'JJBuild'}" />
								<p:panel style="height: 25px;width: 30px; margin: auto;">
									<p:commandButton styleClass="checkBoxButton"
										value="#{rowName.allTestcases ? 'V' : 'X'}" disabled="true"
										update=":growlForm :testFormCenter :testFormWest :container :rate "
										actionListener="#{jJTestcaseBean.onCellEdit(rowName)}"
										onstart="PF('blockUIWidget').block()"
										oncomplete="PF('blockUIWidget').unblock();" />
								</p:panel>
							</f:facet>
							<p:panel>
								<p:selectBooleanCheckbox
									disabled="#{rowName.allTestcases or columnName.allBuilds}"
									rendered="#{rowName['class'].simpleName == 'JJBuild'}"
									value="#{jJTestcaseBean.value[colIdx][rowIdx]}">
									<p:ajax										
										update=":growlForm :testFormCenter :testFormWest :container :rate"
										listener="#{jJTestcaseBean.onCellEdit(colIdx,rowIdx)}"
										onstart="PF('blockUIWidget').block()"
										oncomplete="PF('blockUIWidget').unblock();" />
								</p:selectBooleanCheckbox>
							</p:panel>
						</p:columns>
					</p:dataTable>
					<h:panelGrid columns="2" border="0">
						<p:dataTable id="testcaseRecapDataTable" var="tcr"
							paginatorPosition="bottom"
							value="#{jJTestcaseBean.testCaseRecaps}" paginator="true"
							rows="5" style="width:100%;" rowKey="#{tcr.testcase.name}"
							rendered="#{jJTestcaseBean.rendredTestCaseRecaps}">
							<f:facet name="header">
								<h:outputText value="#{jJTestcaseBean.chapter.name}" />
							</f:facet>
							<p:column exportable="false">
								<f:facet name="header">
									<h:outputText value="#{messages.test_table_testcase_title}" />
								</f:facet>
								<h:outputText value="#{tcr.testcase.name}" />
							</p:column>
							<p:column exportable="false">
								<f:facet name="header">
									<h:outputText value="#{messages.test_table_status_title}" />
								</f:facet>
								<h:outputText value="#{tcr.status}" />
							</p:column>

							<p:column styleClass="action-column">
								<f:facet name="header">
									<h:outputText value="#{messages.test_table_action_title}" />
								</f:facet>
								<p:commandButton id="runButton" icon="ui-icon-play"
									oncomplete="PF('runTestcaseDialogWidget').show()"
									action="#{jJTestcaseBean.runTestcase(jJTestcaseexecutionBean,jJTeststepexecutionBean)}"
									update=":runTestcaseDialog" resetValues="true"
									disabled="#{tcr.disabled or !loginBean.authorisationService.xTest}">
									<f:setPropertyActionListener value="#{tcr.testcase}"
										target="#{jJTestcaseBean.testcase}" />
								</p:commandButton>
								<p:tooltip for="runButton" value="Run #{tcr.testcase.name}"
									showEffect="fade" hideEffect="fade" />
								<p:commandButton id="editButton" icon="ui-icon-pencil"
									oncomplete="PF('testcaseDialogWidget').show()"
									action="#{jJTestcaseBean.editTestcase(jJTeststepBean)}"
									update=":testcaseDialog" resetValues="true"
									disabled="#{!loginBean.authorisationService.wTest}">
									<f:setPropertyActionListener value="#{tcr.testcase}"
										target="#{jJTestcaseBean.testcase}" />
								</p:commandButton>
								<p:tooltip for="editButton" value="#{messages.label_edit}"
									showEffect="fade" hideEffect="fade" />
								<p:commandButton id="copyButton" icon="ui-icon-copy"
									disabled="#{!loginBean.authorisationService.wTest}"
									action="#{jJTestcaseBean.onCopyEvent}"
									update=":growlForm :testFormCenter:testcaseRecapDataTable :container :rate">
									<f:setPropertyActionListener value="#{tcr.testcase}"
										target="#{jJTestcaseBean.copyTestcase}" />
								</p:commandButton>
								<p:tooltip for="copyButton" value="Copy" showEffect="fade"
									hideEffect="fade" />
							</p:column>
							<f:facet name="footer">
								<p:commandButton value="#{messages.test_create_button}"
									id="newTestcase" resetValues="true"
									disabled="#{!loginBean.authorisationService.wTest}"
									actionListener="#{jJTestcaseBean.newTestcase(jJTeststepBean)}"
									update=":testcaseDialog"
									oncomplete="PF('testcaseDialogWidget').show()"
									icon="ui-icon-plusthick" />
								<p:commandButton value="Paste" id="pasteTestcase"
									resetValues="true"
									disabled="#{!loginBean.authorisationService.wTest or jJTestcaseBean.copyTestcase == null}"
									actionListener="#{jJTestcaseBean.pasteTestcase(jJTeststepBean)}"
									update=":testcaseDialog"
									oncomplete="PF('testcaseDialogWidget').show()"
									icon="ui-icon-disk" />
							</f:facet>
						</p:dataTable>
						<h:panelGrid columns="1" border="0"
							style="float: right;width: 40%;min-width:300px;"
							rendered="#{jJTestcaseBean.rendredTestCaseRecaps}">
							<p:panelGrid columns="1" style="width:100%"
								rendered="#{jJTestcaseBean.rendredTestCaseRecaps}">
								<f:facet name="header">
									#{messages.test_requirement_progressBarHeader}
								</f:facet>
								<p:progressBar id="completion"
									rendered="#{jJTestcaseBean.rendredTestCaseRecaps}"
									value="#{jJTestcaseBean.reqCoverage}"
									labelTemplate="#{messages.specification_completion_progress} {value}%"
									displayOnly="true" />
							</p:panelGrid>

							<p:panelGrid columns="1" style="width:100%"
								rendered="#{jJTestcaseBean.rendredTestCaseRecaps and chartBean.pieChart != null}">
								<f:facet name="header">
								#{messages.test_requirement_pieChart}
								</f:facet>
								<p:pieChart id="custom" value="#{chartBean.pieChart}"
									legendPosition="e" fill="false" showDataLabels="true"
									style="height:200px;margin: auto;width:300px;"
									rendered="#{jJTestcaseBean.rendredTestCaseRecaps  and chartBean.pieChart != null}"
									sliceMargin="5" seriesColors="#{chartBean.pieChartSerieColor}" />
							</p:panelGrid>
						</h:panelGrid>
					</h:panelGrid>
					<p:lineChart id="filled" value="#{chartBean.categoryModel}"
						legendPosition="ne" title="#{messages.test_graph_testcase_title}"
						seriesColors="#{chartBean.seriesColors}"
						style="height:300px;margin-top:2%;"
						xaxisLabel="#{messages.test_graph_ordinate_label}"
						yaxisLabel="#{messages.test_graph_abscissa_label}" animate="true"
						rendered="#{jJTestcaseBean.rendredTestCaseRecaps}" />

					<p:dataTable id="teststepRecapDataTable" paginatorPosition="bottom"
						value="#{jJTeststepBean.teststeps}" rowKey="#{ts.name}" var="ts"
						rendered="#{jJTestcaseBean.rendredTestCaseHistorical}"
						paginator="true" rows="7" style="width:42%;">
						<f:facet name="header">
							<p:row>
								<p:column>
									<h:outputText
										value="TC #{jJTestcaseBean.testcase.ordering}: #{jJTestcaseBean.testcase.name}" />
									<br />
								</p:column>
								<p:column>
									<h:outputText
										value=" Requirement: #{jJTestcaseBean.testcase.requirement.name}" />
									<br />
								</p:column>
								<p:column>
									<p:commandButton id="editButton" icon="ui-icon-pencil"
										oncomplete="PF('testcaseDialogWidget').show()"
										resetValues="true"
										disabled="#{!loginBean.authorisationService.wTest}"
										action="#{jJTestcaseBean.editTestcase(jJTeststepBean)}"
										update=":testcaseDialog" />
									<p:tooltip for="editButton" value="#{messages.label_edit}"
										showEffect="fade" hideEffect="fade" />
									<p:commandButton id="runButton" icon="ui-icon-play"
										oncomplete="PF('runTestcaseDialogWidget').show()"
										actionListener="#{jJTestcaseBean.runTestcase(jJTestcaseexecutionBean,jJTeststepexecutionBean)}"
										update=":runTestcaseDialog" resetValues="true"
										disabled="#{empty jJTeststepBean.teststeps or jJBuildBean.build == null or !loginBean.authorisationService.xTest}">
										<f:setPropertyActionListener
											value="#{jJTestcaseBean.testcase}"
											target="#{jJTestcaseBean.testcase}" />
									</p:commandButton>
									<p:commandButton id="copyButton" icon="ui-icon-copy"
										disabled="#{!loginBean.authorisationService.wTest}"
										action="#{jJTestcaseBean.onCopyEvent}"
										update=":growlForm :testFormCenter:testcaseRecapDataTable ">
										<f:setPropertyActionListener
											value="#{jJTestcaseBean.testcase}"
											target="#{jJTestcaseBean.copyTestcase}" />
									</p:commandButton>
									<p:tooltip for="copyButton" value="Copy" showEffect="fade"
										hideEffect="fade" />
								</p:column>
							</p:row>

						</f:facet>

						<p:column headerText="Order">
							<h:outputText value="#{ts.ordering}" />
						</p:column>

						<p:column headerText="Action">
							<h:outputText value="#{ts.actionstep}" escape="false"
								style="white-space: pre-wrap;max-height: 30px;min-height: 30px;display: block;overflow: hidden;word-wrap: break-word;text-overflow: ellipsis" />
						</p:column>
						<p:column headerText="Result">
							<h:outputText value="#{ts.resultstep}" escape="false"
								style="white-space: pre-wrap;max-height: 30px;min-height: 30px;display: block;overflow: hidden;word-wrap: break-word;text-overflow: ellipsis" />
						</p:column>
					</p:dataTable>

					<p:dataTable id="testexecutionRecapDataTable"
						value="#{jJTestcaseexecutionBean.testCaseexecutionRecaps}"
						rowKey="#{tce.name}" var="tce" paginatorPosition="bottom"
						rendered="#{jJTestcaseBean.rendredTestCaseHistorical}"
						paginator="true" rows="7" style="width:42%;margin-top: 20px;">
						<p:column headerText="Id">
							<h:outputText value="#{tce.testcaseexecution.id}" />
						</p:column>
						<p:column headerText="Build">
							<h:outputText value="#{tce.testcaseexecution.build.name}" />
						</p:column>
						<p:column headerText="Creation Date">
							<h:outputText value="#{tce.testcaseexecution.creationDate}">
								<f:converter converterId="extendedDateTimeConverter" />
								<f:attribute name="pattern" value="dd/MM/yyyy" />
								<f:attribute name="timeZone" value="UCL" />
							</h:outputText>
						</p:column>
						<p:column headerText="Update Date">
							<h:outputText value="#{tce.testcaseexecution.updatedDate}">
								<f:converter converterId="extendedDateTimeConverter" />
								<f:attribute name="pattern" value="dd/MM/yyyy" />
								<f:attribute name="timeZone" value="UCL" />
							</h:outputText>
						</p:column>
						<p:column headerText="Status">
							<h:outputText value="#{tce.status}" />
						</p:column>
					</p:dataTable>
				</h:form>
			</p:layoutUnit>
		</p:layout>

		<p:hotkey bind="esc" handler="PF('videoHelpWidget').hide()" />
		<p:dialog id="videoHelpDialog" widgetVar="videoHelpWidget"
			position="center" header="#{messages.specification_video_help_title}"
			style="padding:0px;" resizable="false" draggable="false"
			minHeight="500" minWidth="500" showEffect="fade" hideEffect="fade">
			<video width="100%" height="100%" controls="true">
				<source src="https://www.starit.fr/jjtraining.mp4" type="video/mp4" />
			</video>
		</p:dialog>

		<p:dialog id="testImportXMLDialog" draggable="false"
			header="#{messages.specification_import_title} XML" modal="true"
			widgetVar="testImportXMLDialogWidget" dynamic="true"
			resizable="false">
			<p:ajax event="close" listener="#{jJTestcaseBean.closeXMLDialog}" />
			<p:outputPanel id="importXMLPanel">
				<h:form id="importXMLForm">
					<p:panel styleClass="panelDialog">
						<f:facet name="header">
							<p:messages id="messages" showDetail="false" closable="true" />
						</f:facet>
					</p:panel>
					<p:fileUpload
						fileUploadListener="#{jJTestcaseBean.handleImportXML}"
						mode="advanced" dragDropSupport="false"
						update="messages :testFormCenter :testFormWest :testFormNorth "
						sizeLimit="100000" fileLimit="3" allowTypes="/(\.|\/)(xml)$/" />

				</h:form>
			</p:outputPanel>
		</p:dialog>

		<p:hotkey bind="esc" handler="PF('testcaseDialogWidget').hide()" />
		<p:dialog id="testcaseDialog"
			header="#{messages[jJTestcaseBean.message]}" modal="true"
			widgetVar="testcaseDialogWidget" dynamic="true" resizable="false"
			style="top: 30px;">
			<p:ajax event="close" update=":testFormCenter :testFormWest "
				listener="#{jJTestcaseBean.closeDialog}" />
			<p:outputPanel id="testcaseDialogPanel">
				<ui:include src="testDialog.xhtml" />
			</p:outputPanel>
		</p:dialog>
		<p:dialog id="runTestcaseDialog" header="#{messages.test_exec_title}"
			hideEffect="explode" modal="true" widgetVar="runTestcaseDialogWidget"
			draggable="false" height="370px" dynamic="true" resizable="false"
			width="400px">
			<p:hotkey bind="esc" handler="PF('testcaseDialogWidget').hide()" />
			<p:hotkey bind="space" handler="TestcaseExecSuccessButton.jq.click()" />
			<p:hotkey bind="S" handler="TestcaseExecSuccessButton.jq.click()" />
			<p:hotkey bind="F" handler="TestcaseExecFailedButton.jq.click()" />
			<p:ajax event="close" update=":testFormCenter :testFormWest "
				listener="#{jJTeststepexecutionBean.closeDialog()}" />
			<p:outputPanel id="runTestcaseDialogPanel">
				<h:form id="runForm">
					<p:panel styleClass="panelDialog">
						<f:facet name="header">
							<p:messages id="msg" showDetail="false" closable="true" />
						</f:facet>
					</p:panel>
					<p:tabView id="teststepTabView" widgetVar="teststepTabViewWidget"
						activeIndex="#{jJTeststepexecutionBean.activeIndex}"
						scrollable="true" dynamic="true"
						value="#{jJTeststepexecutionBean.teststepexecutions}" var="tse">
						<p:ajax event="tabChange"
							listener="#{jJTeststepexecutionBean.onTabChange}"
							update="teststepTabView :runForm:testcaseexecutionStatus :runForm:validateButton" />
						<p:tab title="#{tse.teststep.ordering}">
							<p:panelGrid>
								<p:row>
									<p:column>
										<h:outputText value="#{messages.test_exec_action_label}" />
									</p:column>
									<p:column>
										<h:outputText value="#{messages.test_exec_result_label}" />
									</p:column>
								</p:row>
								<p:row>
									<p:column>
										<p:scrollPanel mode="native" style="height:150px;width:130px;">
											<h:outputText escape="false"
												value="#{tse.teststep.actionstep}" />
										</p:scrollPanel>
									</p:column>
									<p:column>
										<p:scrollPanel mode="native" style="height:150px;width:130px;">
											<h:outputText escape="false"
												value="#{tse.teststep.resultstep}" />
										</p:scrollPanel>
									</p:column>
								</p:row>
								<p:row>
									<p:column>
										<h:outputText value="Status: " />
									</p:column>
									<p:column>
										<p:commandButton id="testExecSuccessButton"
											disabled="#{tse.passed != null}"
											value="#{messages.test_graph_success_label}"
											icon="ui-icon-circle-check" styleClass="TestcaseExecSuccess"
											actionListener="#{jJTeststepexecutionBean.setStatus('true')}"
											action="#{jJTeststepexecutionBean.handleStatus(tse)}"
											widgetVar="TestcaseExecSuccessButton"
											update="teststepTabView :runForm:msg :runForm:testcaseexecutionStatus :runForm:validateButton :bugForm:createPanelGrid"
											async="true" ajax="true" />
										<p:commandButton id="testExecFailedButton"
											disabled="#{tse.passed != null}"
											value="#{messages.test_graph_failed_label}"
											icon="ui-icon-circle-close" styleClass="TestcaseExecFailed"
											actionListener="#{jJTeststepexecutionBean.setStatus('false')}"
											action="#{jJTeststepexecutionBean.handleStatus(tse)}"
											widgetVar="TestcaseExecFailedButton"
											update="teststepTabView :runForm:msg :runForm:testcaseexecutionStatus :runForm:validateButton :bugForm:createPanelGrid"
											async="true" ajax="true" />

										<p:remoteCommand name="remoteButton" update=":runForm" />
									</p:column>
								</p:row>
							</p:panelGrid>
						</p:tab>
					</p:tabView>

					<p:panelGrid style="width: 100%;"
						rendered="#{!jJTeststepexecutionBean.disabledTestcase}">
						<p:row>
							<p:column>
								<p:selectOneButton id="testcaseexecutionStatus"
									value="#{jJTestcaseexecutionBean.status}"
									disabled="#{jJTeststepexecutionBean.disabledTestcase}">
									<p:ajax listener="#{jJTestcaseexecutionBean.handleStatus()}" />
									<f:selectItem itemValue="true"
										itemLabel="#{messages.test_exec_status_passed_label}" />
									<f:selectItem itemValue="false"
										itemLabel="#{messages.test_exec_status_failed_label}" />
								</p:selectOneButton>
							</p:column>
							<p:column>
								<p:commandButton id="validateButton"
									value="#{messages.test_exec_valid_label}"
									icon="ui-icon-circle-check"
									update=":testFormCenter :testFormWest :growlForm "
									actionListener="#{jJTeststepexecutionBean.validateTab}"
									style="float: right;" onstart="PF('blockUIWidget').block()"
									oncomplete="PF('blockUIWidget').unblock()"
									disabled="#{jJTeststepexecutionBean.disabledTestcase}" />
							</p:column>
						</p:row>
					</p:panelGrid>
				</h:form>
			</p:outputPanel>
		</p:dialog>

		<p:dialog header="#{messages.bug_create_title}" modal="true"
			widgetVar="bugTestDialogWidget" dynamic="true" resizable="true"
			maximizable="true" showEffect="fade" hideEffect="explode"
			style="top: 30px;">
			<p:ajax event="close" listener="#{jJBugBean.handleDialogClose}" />
			<p:outputPanel id="createPanel">
				<h:form id="bugForm" enctype="multipart/form-data">
					<ui:include src="bugDialog.xhtml">
						<ui:param name="JJBug_" value="#{jJTeststepexecutionBean.bug}" />
					</ui:include>
					<p:commandButton id="saveBug" value="#{messages.label_save}"
						action="#{jJBugBean.saveBug}"
						update=":runForm:teststepTabView  :runForm:testcaseexecutionStatus :runForm:validateButton  :growlForm"
						oncomplete="PF('bugTestDialogWidget').hide()" />
				</h:form>
			</p:outputPanel>
		</p:dialog>
	</ui:define>
</ui:composition>
</html>