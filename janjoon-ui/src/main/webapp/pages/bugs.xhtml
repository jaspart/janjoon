<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="../templates/layout.xhtml">
	<ui:define name="content">
		<p:panel id="bugPanel" header="BUG" style="width: 100%;valign: top;">
		<f:event listener="#{jJBugBean.initJJBug}"
				type="preRenderView"/>
			<h:form id="bugForm">
				<p:growl id="bugMessage" showDetail="true" />
				<p:dataTable id="bugTable2" sortMode="multiple"
					value="#{jJBugBean.bugList}" rowKey="#{bug.id}" var="bug"
					widgetVar="bugTable" scrollable="true" scrollHeight="400"
					filteredValue="#{jJBugBean.filteredJJBug}"
					emptyMessage="#{messages.label_notFound}">
					<f:facet name="header">
						<p:outputPanel>
							<h:outputText value="Search all fields:" />
							<p:inputText id="globalFilter" onkeyup="PF('bugTable').filter()"
								style="width:200px" placeholder="Enter keyword" />
						</p:outputPanel>
					</f:facet>
					<p:column headerText="Titre" filterBy="name"
						filterMatchMode="contains" sortBy="name" filterStyle="width: 90%;"
						style="width: 10% !important;height: 5px !important;">
						<h:outputText value="#{bug.name}" />
					</p:column>
					<p:column headerText="Creation Date" sortBy="creationDate"
						style="width: 10% !important;height: 5px !important;">
						<h:outputText value="#{bug.creationDate}">
							<f:converter converterId="extendedDateTimeConverter" />
							<f:attribute name="pattern" value="dd/MM/yyyy HH:mm" />
							<f:attribute name="timeZone" value="UCL" />
						</h:outputText>
					</p:column>
					<p:column headerText="Criticity" sortBy="criticity.name"
						style="width: 10% !important;height: 5px !important;"
						filterOptions="#{jJBugBean.criticityOptions}"
						filterMatchMode="exact" filterStyle="width: 90%;"
						filterBy="criticity.name">
						<h:outputText value="#{bug.criticity.name}" />
					</p:column>
					<p:column headerText="Importance" sortBy="importance.name"
						style="width: 10% !important;height: 5px !important;"
						filterOptions="#{jJBugBean.importanceOptions}"
						filterMatchMode="exact" filterStyle="width: 90%;"
						filterBy="importance.name">
						<h:outputText value="#{bug.importance.name}" />
					</p:column>
					<p:column headerText="Status" sortBy="status.name"
						filterBy="status.name"
						style="width: 10% !important;height: 5px !important;"
						filterOptions="#{jJBugBean.statusOptions}" filterMatchMode="exact"
						filterStyle="width: 90%;">
						<h:outputText value="#{bug.status.name}" />
					</p:column>
					<p:column styleClass="action-column">
						<f:facet name="header">
							<h:outputText value="Actions" />
						</f:facet>
						<p:commandButton id="editButton" icon="ui-icon-pencil"
							update=":editForm:editPanelGrid"
							oncomplete="editDialogWidget.show()"
							title="#{messages.label_edit}">
							<f:setPropertyActionListener value="#{bug}"
								target="#{jJBugBean.JJBug_}" />
						</p:commandButton>
						<p:tooltip for="editButton" value="#{messages.label_edit}"
							showEffect="fade" hideEffect="fade" />
						<p:commandButton id="deleteButton" icon="ui-icon-trash"
							oncomplete="deleteDialogWidget.show()"
							title="#{messages.label_delete}">
							<f:setPropertyActionListener value="#{bug}"
								target="#{jJBugBean.JJBug_}" />
						</p:commandButton>
						<p:tooltip for="deleteButton" value="#{messages.label_delete}"
							showEffect="fade" hideEffect="fade" />
					</p:column>
					<f:facet name="footer">
						<p:commandButton value="New" id="createButton"
							icon="ui-icon-circle-plus" update=":createForm:createPanelGrid"
							oncomplete="createDialogWidget.show()"
							title="#{messages.label_create}" />
						<p:tooltip for="createButton" value="#{messages.label_create}"
							showEffect="fade" hideEffect="fade" />
					</f:facet>
				</p:dataTable>
			</h:form>
			<p:dialog id="createDialog" header="#{messages.label_create} JJBug"
				modal="true" widgetVar="createDialogWidget" dynamic="true"
				visible="#{jJBugBean.createDialogVisible}" resizable="true"
				maximizable="true" showEffect="fade" hideEffect="explode">
				<p:ajax event="close" update="createForm"
					listener="#{jJBugBean.handleDialogClose}" />
				<p:outputPanel id="createPanel">
					<h:form id="createForm" enctype="multipart/form-data">
						<h:panelGrid id="createPanelGrid" columns="3"
							binding="#{jJBugBean.createPanelGrid}" styleClass="dialog"
							columnClasses="col1,col2,col3" />
						<p:commandButton id="createSaveButton"
							value="#{messages.label_save}" action="#{jJBugBean.persistBug}"
							update="createPanelGrid,:bugForm:bugMessage,:bugForm" />
						<p:commandButton id="createCloseButton"
							value="#{messages.label_close}"
							onclick="createDialogWidget.hide()" type="button" />
					</h:form>
				</p:outputPanel>
			</p:dialog>

			<p:dialog id="editDialog" header="#{messages.label_edit} JJBug"
				modal="true" widgetVar="editDialogWidget" dynamic="true"
				resizable="true" maximizable="true" showEffect="fade"
				hideEffect="explode">
				<p:ajax event="close" update=":bugForm"
					listener="#{jJBugBean.handleDialogClose}" />
				<p:outputPanel id="editPanel">
					<h:form id="editForm" enctype="multipart/form-data">
						<h:panelGrid id="editPanelGrid" columns="3"
							binding="#{jJBugBean.editPanelGrid}" styleClass="dialog"
							columnClasses="col1,col2,col3" />
						<p:commandButton id="editSaveButton"
							value="#{messages.label_save}" action="#{jJBugBean.persistBug}"
							update="editPanelGrid :bugForm:bugMessage :bugForm" />
						<p:commandButton id="editCloseButton"
							value="#{messages.label_close}" onclick="editDialogWidget.hide()"
							type="button" />
					</h:form>
				</p:outputPanel>
			</p:dialog>

			<p:confirmDialog id="deleteDialog" widgetVar="deleteDialogWidget"
				message="#{messages.label_delete_record}" showEffect="fade"
				hideEffect="explode" header="#{messages.label_confirm_deletion}"
				severity="alarm">
				<p:outputPanel id="deletePanel">
					<h:form id="deleteForm">
						<p:commandButton id="deleteYesButton"
							value="#{messages.label_yes}" action="#{jJBugBean.delete}"
							update=":bugForm :bugForm:bugMessage"
							oncomplete="deleteDialogWidget.hide()" />
						<p:commandButton id="deleteNoButton" value="#{messages.label_no}"
							onclick="deleteDialogWidget.hide()" type="button" />
					</h:form>
				</p:outputPanel>
			</p:confirmDialog>

		</p:panel>
	</ui:define>
</ui:composition>
</html>