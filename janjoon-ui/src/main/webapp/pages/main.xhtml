<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<ui:composition template="../templates/layout.xhtml">
	<ui:define name="content">		
		<p:panel id="mainPanel" toggleable="true" toggleSpeed="250">
			<p:growl id="notif" showDetail="true" />
			<p:growl id="dev" showDetail="true" />
			<f:facet name="header">
				<h:outputFormat value="#{messages.label_welcome_titlepane}">
					<f:param value="#{messages.label_appName}" />
				</h:outputFormat>
			</f:facet>
			<p />
			<h:outputText id="welcomeText" value="#{messages.label_welcome_text}" />
			<p />

		</p:panel>
		<p:panel id="dataPanel" rendered="#{loginBean.enable}" 
			header="Message DataTable">
			<f:event listener="#{jJMessageBean.initJJmessageTable}"
				type="preRenderView"  />
			<h:form id="messageForm">
				<p:dataTable id="MessageTable2" sortMode="multiple" 
					value="#{jJMessageBean.allJJMessages}" rowKey="#{mes.id}" var="mes"
					widgetVar="messageTable" scrollable="true" scrollHeight="400"
					filteredValue="#{jJMessageBean.filteredJJMessage}"
					emptyMessage="No JJmessage found with given criteria">
					<f:facet name="header">
						<p:outputPanel>
							<h:outputText value="Search all fields:" />
							<p:inputText id="globalFilter"
								onkeyup="PF('messageTable').filter()" style="width:150px"
								placeholder="Enter keyword" />
						</p:outputPanel>
					</f:facet>
					<p:column headerText="Messages" filterBy="message"
						filterMatchMode="contains" sortBy="message">
						<h:outputText value="#{mes.message}" />
					</p:column>
					<p:column headerText="Project" filterBy="project.name" sortBy="project.name"
						filterOptions="#{jJMessageBean.projectOptions}"
						filterMatchMode="contains">
						<h:outputText value="#{mes.project.name}" />
					</p:column>
					<p:column headerText="Product" filterBy="product.name" sortBy="product.name"
						filterOptions="#{jJMessageBean.productOptions}"
						filterMatchMode="exact">
						<h:outputText value="#{mes.product.name}" />
					</p:column>
					<p:column headerText="Creator" filterBy="createdBy.name" sortBy="createdBy.name"
						filterOptions="#{jJMessageBean.creatorOptions}"
						filterMatchMode="exact">
						<h:outputText value="#{mes.createdBy.name}" />
					</p:column>
					<p:column headerText="Criticity" filterBy="criticity.name" sortBy="criticity.name"
						filterMatchMode="exact"
						filterOptions="#{jJMessageBean.criticityOptions}">
						<h:outputText value="#{mes.criticity.name}" />
					</p:column>

				</p:dataTable>
			</h:form>
		</p:panel>


	</ui:define>
</ui:composition>
</html>