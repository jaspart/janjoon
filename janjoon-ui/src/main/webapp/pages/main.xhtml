<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<ui:composition template="../templates/layout.xhtml">
	<ui:define name="content">
		<p:panel id="mainPanel" toggleable="true" toggleSpeed="250">
			<p:growl id="notif" showDetail="true" life="2000" />
			<p:growl id="dev" showDetail="true" life="2000" />
			<f:facet name="header">
				<h:outputFormat value="#{messages.label_welcome_titlepane}">
					<f:param value="#{messages.label_appName}" />
				</h:outputFormat>
			</f:facet>
			<p />
			<h:outputText id="welcomeText" value="#{messages.label_welcome_text}" />
			<p />

		</p:panel>
		<br />
		<p:panel id="dataPanel" rendered="#{loginBean.enable}"
			header="Message DataTable">
			<f:event listener="#{jJMessageBean.initJJmessageTable}"
				type="preRenderView" />
			<h:form id="messageForm">
				<p:dataTable id="MessageTable2" sortMode="multiple"
					value="#{jJMessageBean.enabledJJMessage}" rowKey="#{mes.id}"
					var="mes" widgetVar="messageTable" scrollable="true"
					scrollHeight="400"
					filteredValue="#{jJMessageBean.filteredJJMessage}"
					emptyMessage="#{messages.label_notFound}">
					<f:facet name="header">
						<p:outputPanel>
							<h:outputText value="Search all fields:" />
							<p:inputText id="globalFilter"
								onkeyup="PF('messageTable').filter()" style="width:200px"
								placeholder="Enter keyword" />
						</p:outputPanel>
					</f:facet>
					<p:column headerText="Messages" filterBy="message"
						filterMatchMode="contains" sortBy="message"
						filterStyle="width: 90%;"
						style="width: 10% !important;height: 5px !important;">
						<h:outputText style="width: 90% !important;"
							value="#{mes.message}" />
					</p:column>
					<p:column headerText="Project" filterBy="project.name"
						sortBy="project.name"
						filterOptions="#{jJMessageBean.projectOptions}"
						filterMatchMode="exact" filterStyle="width: 90%;"
						style="width: 6% !important;height: 5px !important;">
						<h:outputText value="#{mes.project.name}" />
					</p:column>
					<p:column headerText="Product" filterBy="product.name"
						sortBy="product.name"
						filterOptions="#{jJMessageBean.productOptions}"
						filterMatchMode="exact" filterStyle="width: 90%;"
						style="width: 6% !important;height: 5px !important;">
						<h:outputText value="#{mes.product.name}" />
					</p:column>
					<p:column headerText="Creator" filterBy="createdBy.name"
						sortBy="createdBy.name"
						filterOptions="#{jJMessageBean.creatorOptions}"
						filterMatchMode="exact" filterStyle="width: 90%;"
						style="width: 6% !important;height: 5px !important;">
						<h:outputText value="#{mes.createdBy.name}" />
					</p:column>
					<p:column headerText="Criticity" filterBy="criticity.name"
						sortBy="criticity.name" filterMatchMode="exact"
						style="width: 6% !important;height: 5px !important;"
						filterOptions="#{jJMessageBean.criticityOptions}"
						filterStyle="width: 90%;">
						<h:outputText value="#{mes.criticity.name}" />
					</p:column>
					<p:column headerText="Status" sortBy="status.name"
						filterBy="status.name" filterMatchMode="exact"
						filterOptions="#{jJMessageBean.statusOptions}"
						style="width: 6% !important;height: 5px !important;"
						filterStyle="width: 90%;">
						<h:outputText value="#{mes.status.name}" />
					</p:column>
					<p:column headerText="Creation Date" sortBy="creationDate"
						style="width: 6% !important;height: 5px !important;">
						<h:outputText value="#{mes.creationDate}">
							<f:converter converterId="extendedDateTimeConverter" />
							<f:attribute name="pattern" value="dd/MM/yyyy" />
							<f:attribute name="timeZone" value="UCL" />
						</h:outputText>
					</p:column>
					<p:column headerText="Resolve" style="width:5% !important;">
						<p:commandButton id="resolveButton" value="resolve"
							oncomplete="resolveDialogWidget.show()"
							title="#{messages.label_disable}">
							<f:setPropertyActionListener value="#{mes}"
								target="#{jJMessageBean.resolvedJJMessage}" />
						</p:commandButton>
						<p:tooltip for="resolveButton" value="#{messages.label_disable}"
							showEffect="fade" hideEffect="fade" />
					</p:column>
				</p:dataTable>
			</h:form>
			<p:growl id="notifMPT" showDetail="true" life="2000" />
			<p:confirmDialog id="resolveDialog" widgetVar="resolveDialogWidget"
				message="#{messages.label_disable_record}" showEffect="fade"
				hideEffect="explode" header="#{messages.label_confirm_disabling}"
				severity="alarm">
				<p:outputPanel id="deletePanel">
					<h:form id="deleteForm">
						<p:commandButton id="deleteYesButton"
							value="#{messages.label_yes}"
							action="#{jJMessageBean.resolveJJMessage}"
							update=":messageForm,:notifMPT"
							oncomplete="resolveDialogWidget.hide()" />
						<p:commandButton id="deleteNoButton" value="#{messages.label_no}"
							onclick="resolveDialogWidget.hide()" type="button" />
					</h:form>
				</p:outputPanel>
			</p:confirmDialog>
		</p:panel>


	</ui:define>
</ui:composition>
</html>
