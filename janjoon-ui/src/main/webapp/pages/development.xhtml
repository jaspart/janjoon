<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="../templates/layout.xhtml">
	<link type="text/css" rel="stylesheet"
		href="#{facesContext.externalContext.requestContextPath}/syntaxhighlighter/syntaxhighlighter.css" />
	<link type="text/css" rel="stylesheet"
		href="/syntaxhighlighter/standard.css" />
	<ui:define name="content">
		<center>
			<p:tabMenu activeIndex="3" name="content">
				<ui:include src="/templates/menu.xhtml" />
			</p:tabMenu>
			<br />
			<p:panel header="#{jJDevelopment.selectedTree}"
				style="width: 360;valign: top;">
				<table class="mytable">
					<h:form id="form">
						<tr>
							<td valign="top"><h:outputLabel value="Branche:" /> <p:selectOneMenu
									id="branches" value="#{jJDevelopment.branche}" effect="fold"
									editable="false" onchange="">
									<f:selectItems value="#{jJDevelopment.branches}" />
									<p:ajax update=":form:fileTree,:form:fileTexte"
										listener="#{jJDevelopment.handleBrancheChange}" />
								</p:selectOneMenu> <h:outputLabel value="Version:" /> <p:selectOneMenu
									value="#{pprBean.city}" effect="fold" editable="true">
									<f:selectItem itemLabel="12.04" itemValue="" />
									<f:selectItems value="#{pprBean.cities}" />
								</p:selectOneMenu> <p:growl id="messages" showDetail="true" /> <p:tree
									id="fileTree" value="#{jJDevelopment.tree}" var="file"
									animate="true" selection="#{jJDevelopment.selectedTree}"
									selectionMode="single">
									<p:ajax event="select" update=":form:messages,:form:fileTexte"
										listener="#{jJDevelopment.onSelectTree}" />
									<p:treeNode type="folder" expandedIcon="ui-icon-folder-open"
										collapsedIcon="ui-icon-folder-collapsed">

										<h:outputText value="#{file.name}" />

									</p:treeNode>

									<p:treeNode type="file" icon="ui-icon-document">
										<h:outputText value="#{file.name}" />
									</p:treeNode>
								</p:tree> <h:outputLabel value="Task" /> <p:selectOneMenu
									value="#{pprBean.city}" effect="fold" editable="true">
									<f:selectItem itemLabel="TREQ000312: update interface"
										itemValue="" />
									<f:selectItems value="#{pprBean.cities}" />
								</p:selectOneMenu> 
								<p:commandButton value="Commit" id="submit"
									update=":form:branches,:form:fileTree,:form:fileTexte"
									icon="ui-icon-disk" action="#{jJDevelopment.commit}"
									process="@this" /> 
									<p:commandButton value="LoadRepository"
									actionListener="#{pprBean.savePerson}" id="markdone" update=""
									icon="ui-icon-disk" /></td>
							<td>
							<p:inputTextarea id="fileTexte" rows="20" cols="75"
									value="#{jJDevelopment.fileTexte}" />
									</td>
						</tr>
					</h:form>
				</table>

			</p:panel>
		</center>
	</ui:define>
	<ui:define name="outer">
		<center>
			<ui:insert name="highlight">
				<script type="text/javascript"
					src="#{request.contextPath}/syntaxhighlighter/shCore.js"></script>
				<script type="text/javascript"
					src="#{request.contextPath}/syntaxhighlighter/shBrushXml.js"></script>
				<script type="text/javascript"
					src="#{request.contextPath}/syntaxhighlighter/shBrushJava.js"></script>
				<script type="text/javascript"
					src="#{request.contextPath}/syntaxhighlighter/shBrushCss.js"></script>
				<script type="text/javascript"
					src="#{request.contextPath}/syntaxhighlighter/shBrushJScript.js"></script>
				<script type="text/javascript">
					dp.SyntaxHighlighter.ClipboardSwf = '\#{request.contextPath}/syntaxhighlighter/clipboard.swf';
					dp.SyntaxHighlighter.HighlightAll('code');
				</script>
			</ui:insert>
		</center>
	</ui:define>
</ui:composition>
</html>