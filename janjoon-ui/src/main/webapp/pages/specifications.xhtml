<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="../templates/layout.xhtml">

	<ui:define name="content">

		<h:form id="specForm">
			<f:event type="preRenderComponent"
				listener="#{jJRequirementBean.loadData()}" />

			<table>
				<tr>
					<ui:repeat value="#{jJRequirementBean.categoryList}" var="button">
						<p:commandButton id="input#{button.name}" value="#{button.name}"
							actionListener="#{jJRequirementBean.updateTemplate(button.id)}"
							update=":specForm" />
					</ui:repeat>

					<p:commandButton id="commandButton"
						value="#{messages.specification_import_button}"
						style="float: right;"
						disabled="#{jJRequirementBean.disabledExport}"
						actionListener="#{jJRequirementBean.loadImportFormat()}"
						update=":requirementImportDialog"
						oncomplete="requirementImportDialogWidget.show()" />
				</tr>
				<tr />

				<tr>
					<ui:repeat value="#{jJRequirementBean.tableDataModelList}"
						var="tableDataModel" varStatus="status">

						<td><p:dataTable id="dataTable" var="requirement"
								value="#{tableDataModel}" paginator="true" rows="6"
								style="width:99%" sortMode="multiple"
								filteredValue="#{tableDataModel.filtredRequirements}"
								widgetVar="#{tableDataModel.nameDataModel}_dataTableWidget">

								<f:facet name="header">
									<h:outputText value="#{tableDataModel.nameDataModel}" />
									<p:panelGrid>
										<f:facet name="header">
											<p:row>
												<p:column colspan="1">
													<p:commandButton id="manageChapterButton"
														icon="ui-icon-document"
														title="Manage Chapter and Document"
														update=":chapterDialog"
														actionListener="#{jJChapterBean.loadData(tableDataModel.categoryId)}"
														oncomplete="chapterDialogWidget.show()" />
												</p:column>
												<p:column colspan="1">
													<p:commandButton id="releaseRequirementButton"
														icon=".ui-icon-carat-2-n-s"
														title="Release All Requirements"
														actionListener="#{jJRequirementBean.preReleaseRequirement(tableDataModel.categoryId)}"
														oncomplete="requirementReleaseDialogWidget.show()" />

												</p:column>
												<p:column colspan="4">
													<p:inputText id="globalFilter" style="width:100%"
														onkeyup="#{tableDataModel.nameDataModel}_dataTableWidget.filter()" />
												</p:column>
												<p:column colspan="1">
													<p:commandButton id="newRequirementButton"
														icon="ui-icon-plus" title="New Requirement"
														actionListener="#{jJRequirementBean.newRequirement(tableDataModel.categoryId)}"
														update=":requirementDialog"
														oncomplete="requirementDialogWidget.show()" />
												</p:column>
												<p:column colspan="1">
													<h:commandLink id="pdf"
														disabled="#{jJRequirementBean.disabledExport}"
														actionListener="#{jJChapterBean.updateCategoryId(tableDataModel.categoryId)}">
														<p:graphicImage value="/resources/images/pdf.png" />
														<p:dataExporter type="pdf" target="dataTable"
															fileName="Document"
															preProcessor="#{jJChapterBean.preProcessPDF}" />
													</h:commandLink>
													<p:tooltip for="pdf"
														value="#{jJRequirementBean.warnMessage}" showEffect="fade"
														hideEffect="fade" />
												</p:column>
											</p:row>
										</f:facet>
									</p:panelGrid>
								</f:facet>

								<p:column filterBy="name" filterStyle="display:none"
									style="width:25%" sortBy="id">
									<f:facet name="header">
										<h:outputText
											value="#{messages.specification_table_requirement_title}" />
									</f:facet>
									<h:outputText value="#{requirement.name}" />
								</p:column>

								<p:column filterBy="product.name" filterStyle="display:none"
									style="width:25%" sortBy="product.name">
									<f:facet name="header">
										<h:outputText
											value="#{messages.specification_table_product_title}" />
									</f:facet>
									<h:outputText value="#{requirement.product.name}" />
								</p:column>

								<p:column filterBy="chapter.name" filterStyle="display:none"
									style="width:25%" sortBy="chapter.name">
									<f:facet name="header">
										<h:outputText
											value="#{messages.specification_table_chapter_title}" />
									</f:facet>
									<h:outputText value="#{requirement.chapter.name}" />
								</p:column>

								<p:column exportable="false" styleClass="action-column">
									<f:facet name="header">
										<h:outputText
											value="#{messages.specification_table_actions_title}" />
									</f:facet>
									<p:commandButton id="editButton" icon="ui-icon-pencil"
										action="#{jJRequirementBean.editRequirement()}"
										oncomplete="requirementDialogWidget.show()"
										update=":requirementDialog"
										disabled="#{jJRequirementBean.getDisabledEdit(requirement)}">
										<f:setPropertyActionListener value="#{requirement}"
											target="#{jJRequirementBean.requirement}" />
									</p:commandButton>
									<p:tooltip for="editButton" value="#{messages.label_edit}"
										showEffect="fade" hideEffect="fade" />

									<p:commandButton id="deleteButton" icon="ui-icon-trash"
										oncomplete="requirementDeleteDialogWidget.show()"
										title="#{messages.label_delete}">
										<f:setPropertyActionListener value="#{requirement}"
											target="#{jJRequirementBean.requirement}" />
									</p:commandButton>
									<p:tooltip for="deleteButton" value="#{messages.label_delete}"
										showEffect="fade" hideEffect="fade" />

								</p:column>
								<f:facet name="footer">

									<h:outputText value="#{messages.specification_progress_footer}" />
									<p:row>
										<p:progressBar id="completion" style="width:385px"
											value="#{tableDataModel.coverageProgress}"
											labelTemplate="#{messages.specification_coverage_progress} {value}%"
											displayOnly="true" />
									</p:row>
									<p:row>
										<p:progressBar id="coverage" style="width:385px"
											value="#{tableDataModel.completionProgress}"
											labelTemplate="#{messages.specification_completion_progress} {value}%"
											displayOnly="true" />
									</p:row>
								</f:facet>
							</p:dataTable></td>
					</ui:repeat>
				</tr>
			</table>
		</h:form>

		<p:dialog id="requirementDialog" header="#{jJRequirementBean.message}"
			modal="true" widgetVar="requirementDialogWidget" dynamic="true"
			resizable="false">
			<p:ajax event="close" update=":specForm"
				listener="#{jJRequirementBean.closeDialog}" />
			<p:outputPanel id="requirementDialogPanel">
				<h:form id="requirementDialogForm">
					<p:growl id="msg" />
					<p:scrollPanel style="width:760px;height:450px" mode="native">
						<p:panelGrid style="margin-top:10px">
							<p:row>
								<p:column>
									<p:inputText id="name"
										value="#{jJRequirementBean.requirement.name}" required="true"
										widgetVar="nameWidget"
										label="#{messages.specification_create_name_label}"
										requiredMessage="#{messages.specification_create_name_alert}" />

									<p:message for="name" id="msgName" />
									<p:watermark for="name"
										value="#{messages.specification_create_name_watermark}" />
								</p:column>
								<p:column>
									<h:outputText for="status"
										value="#{messages.specification_create_status_label}" />
									<p:selectOneMenu id="status"
										value="#{jJRequirementBean.requirementStatus}"
										panelStyle="width:150px" effect="fade" style="width:150px"
										filter="true" filterMatchMode="startsWith"
										disabled="#{jJRequirementBean.disabledStatus}">
										<f:converter
											converterId="com.starit.janjoonweb.ui.mb.converter.JJStatusConverter" />
										<f:selectItem
											itemLabel="#{jJRequirementBean.requirementStatus.name}"
											itemValue="#{jJRequirementBean.requirementStatus}" />
										<f:selectItems
											value="#{jJRequirementBean.requirementStatusList}" var="c"
											itemLabel="#{c.name}" itemValue="#{c}" />
										<p:ajax process="@this" partialSubmit="true"
											listener="#{jJRequirementBean.handleSelectStatus()}" />
									</p:selectOneMenu>
								</p:column>
								<p:column>
									<h:outputText for="project"
										value="#{messages.specification_create_project_label} *" />
									<p:selectOneMenu id="project"
										value="#{jJRequirementBean.requirementProject}"
										required="true"
										requiredMessage="Requirement Project is a required value"
										panelStyle="width:150px" effect="fade" style="width:150px"
										filter="true" filterMatchMode="startsWith"
										disabled="#{jJRequirementBean.disabledProject}">

										<f:converter
											converterId="com.starit.janjoonweb.ui.mb.converter.JJProjectConverter" />
										<f:selectItem
											itemLabel="#{jJRequirementBean.requirementProject.name}"
											itemValue="#{jJRequirementBean.requirementProject}" />
										<f:selectItems
											value="#{jJRequirementBean.requirementProjectList}" var="c"
											itemLabel="#{c.name}" itemValue="#{c}" />
										<p:ajax process="@this" partialSubmit="true"
											update="lowRequirement mediumRequirement highRequirement chapter"
											listener="#{jJRequirementBean.handleSelectProject()}" />
									</p:selectOneMenu>
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<h:outputText for="product"
										value="#{messages.specification_create_product_label}" />
									<p:selectOneMenu id="product"
										value="#{jJRequirementBean.requirementProduct}"
										panelStyle="width:150px" effect="fade" style="width:150px"
										filter="true" filterMatchMode="startsWith">
										<f:converter
											converterId="com.starit.janjoonweb.ui.mb.converter.JJProductConverter" />
										<f:selectItem
											itemLabel="#{jJRequirementBean.requirementProduct.name}"
											itemValue="#{jJRequirementBean.requirementProduct}" />
										<f:selectItems
											value="#{jJRequirementBean.requirementProductList}" var="c"
											itemLabel="#{c.name}" itemValue="#{c}" />
										<p:ajax process="@this" partialSubmit="true" update="version"
											listener="#{jJRequirementBean.handleSelectProduct()}" />
									</p:selectOneMenu>
								</p:column>
								<p:column>
									<h:outputText for="version"
										value="#{messages.specification_create_version_label}" />
									<p:selectOneMenu id="version"
										value="#{jJRequirementBean.requirementVersion}"
										panelStyle="width:150px" effect="fade" style="width:150px"
										filter="true" filterMatchMode="startsWith"
										disabled="#{jJRequirementBean.disabledVersion}">
										<f:converter
											converterId="com.starit.janjoonweb.ui.mb.converter.JJVersionConverter" />
										<f:selectItem
											itemLabel="#{jJRequirementBean.requirementVersion.name}"
											itemValue="#{jJRequirementBean.requirementVersion}" />
										<f:selectItems
											value="#{jJRequirementBean.requirementVersionList}" var="c"
											itemLabel="#{c.name}" itemValue="#{c}" />
										<p:ajax process="@this" partialSubmit="true"
											listener="#{jJRequirementBean.handleSelectVersion()}" />
									</p:selectOneMenu>
								</p:column>
								<p:column>
									<h:outputText for="chapter"
										value="#{messages.specification_create_chapter_label}" />
									<p:selectOneMenu id="chapter"
										value="#{jJRequirementBean.requirementChapter}"
										panelStyle="width:150px" effect="fade" style="width:150px"
										filter="true" filterMatchMode="startsWith">
										<f:converter
											converterId="com.starit.janjoonweb.ui.mb.converter.JJChapterConverter" />
										<f:selectItem
											itemLabel="#{jJRequirementBean.requirementChapter.name}"
											itemValue="#{jJRequirementBean.requirementChapter}" />
										<f:selectItems
											value="#{jJRequirementBean.requirementChapterList}" var="c"
											itemLabel="#{c.name}" itemValue="#{c}" />
										<p:ajax process="@this" partialSubmit="true"
											listener="#{jJRequirementBean.handleSelectChapter()}" />
									</p:selectOneMenu>
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<p:selectCheckboxMenu id="lowRequirement"
										value="#{jJRequirementBean.selectedLowRequirementsList}"
										label="#{jJRequirementBean.lowCategoryName}" filter="true"
										filterText="Filter" filterMatchMode="contains"
										panelStyle="width:220px"
										disabled="#{jJRequirementBean.disabledLowRequirements}">
										<f:selectItems
											value="#{jJRequirementBean.lowRequirementsList}" />
									</p:selectCheckboxMenu>
								</p:column>
								<p:column>
									<p:selectCheckboxMenu id="mediumRequirement"
										value="#{jJRequirementBean.selectedMediumRequirementsList}"
										label="#{jJRequirementBean.mediumCategoryName}" filter="true"
										filterText="Filter" filterMatchMode="contains"
										panelStyle="width:220px"
										disabled="#{jJRequirementBean.disabledMediumRequirements}">
										<f:selectItems
											value="#{jJRequirementBean.mediumRequirementsList}" />
									</p:selectCheckboxMenu>
								</p:column>
								<p:column>
									<p:selectCheckboxMenu id="highRequirement"
										value="#{jJRequirementBean.selectedHighRequirementsList}"
										label="#{jJRequirementBean.highCategoryName}" filter="true"
										filterText="Filter" filterMatchMode="contains"
										panelStyle="width:220px"
										disabled="#{jJRequirementBean.disabledHighRequirements}">
										<f:selectItems
											value="#{jJRequirementBean.highRequirementsList}" />
									</p:selectCheckboxMenu>
								</p:column>
							</p:row>
							<p:row>
								<p:column colspan="3">
									<h:outputText
										value="#{messages.specification_create_description_label}" />
									<pe:ckEditor id="description" widgetVar="descriptionWidget"
										toolbar="[['Bold','Italic','Underline','Strike','NumberedList','BulletedList','Image','TextColor','BGColor']]"
										style="width:680px"
										value="#{jJRequirementBean.requirement.description}"
										required="true"
										requiredMessage="Requirement Description is a required value" />
									<!-- 									<p:fileUpload sizeLimit="1000000" fileLimit="3" -->
									<!-- 										allowTypes="/(\.|\/)(gif|jpe?g|png)$/" -->
									<!-- 										update="description" -->
									<!-- 										fileUploadListener="#{loginBean.handleFileUpload}" > -->
									<!-- 										<f:attribute name="field" value="#{jJRequirementBean.requirement}" /> -->
									<!-- 									</p:fileUpload> -->
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<h:outputText
										value="#{messages.specification_create_initiate_label}" />
									<p:selectBooleanCheckbox
										value="#{jJRequirementBean.initiateTask}"
										disabled="#{jJRequirementBean.disabledInitTask}">
										<p:ajax listener="#{jJRequirementBean.loadTask()}"
											update="outputPanel completion" />
									</p:selectBooleanCheckbox>
								</p:column>
								<p:column>
									<h:outputLabel for="workload"
										value="#{messages.specification_create_workload_label}" />
									<p:outputPanel id="outputPanel">
										<p:spinner id="workload"
											value="#{jJRequirementBean.task.workloadPlanned}"
											stepFactor="1" min="0"
											disabled="#{jJRequirementBean.disabledTask}">
											<p:ajax update="workloadvalue" process="@this" />
										</p:spinner>
										<h:outputText id="workloadvalue"
											value="#{jJRequirementBean.task.workloadPlanned} #{messages.specification_create_increment_label}" />
									</p:outputPanel>
								</p:column>

								<p:column>
									<h:outputText
										value="#{messages.specification_create_completed_label}" />
									<p:selectBooleanCheckbox id="completion"
										value="#{jJRequirementBean.task.completed}"
										disabled="#{jJRequirementBean.disabledTask}">
										<p:ajax listener="#{jJRequirementBean.checkCompleteTask()}" />
									</p:selectBooleanCheckbox>
								</p:column>

							</p:row>
							<p:row>
								<p:column rowspan="3" colspan="3">
									<p:inputTextarea id="note" rows="3" cols="100"
										value="#{jJRequirementBean.requirement.note}"
										autoResize="false" />
									<p:watermark for="note"
										value="#{messages.specification_create_note_watermark}" />
								</p:column>
							</p:row>
							<f:facet name="footer">
								<p:row>
									<p:column colspan="3">
										<p:commandButton
											value="#{messages.specification_create_save_button}"
											action="#{jJRequirementBean.save()}" process="@form"
											update="requirementDialogForm" />
									</p:column>
								</p:row>
							</f:facet>
						</p:panelGrid>
					</p:scrollPanel>
				</h:form>
			</p:outputPanel>
		</p:dialog>

		<p:dialog id="chapterDialog"
			header="#{messages.specification_chapter_header}" modal="true"
			widgetVar="chapterDialogWidget" dynamic="true" resizable="false">
			<p:ajax event="close" update=":specForm"
				listener="#{jJChapterBean.closeDialog}" />
			<p:outputPanel id="chapterDialogPanel">
				<h:form id="chapterDialogForm">
					<p:growl id="msg" sticky="true" />
					<p:scrollPanel style="width:760px;height:450px" mode="native">
						<p:panelGrid style="margin-top:10px">
							<f:facet name="header">
								<p:row>
									<p:column colspan="3">
										<h:outputText value="#{jJChapterBean.warnMessage}"
											style="color: red;" />
									</p:column>
								</p:row>
							</f:facet>
							<p:row>
								<p:column>
									<p:inputText id="name" value="#{jJChapterBean.chapter.name}"
										required="true" widgetVar="nameWidget"
										label="#{message.specification_chapter_name_label}"
										requiredMessage="#{message.specification_chapter_name_alert}" />

									<p:message for="name" id="msgName" />
									<p:watermark for="name"
										value="#{messages.specification_create_name_watermark}" />
								</p:column>
							</p:row>

							<p:row>
								<p:column>
									<h:outputText for="project"
										value="#{messages.specification_create_project_label} *" />
									<p:selectOneMenu id="project"
										value="#{jJChapterBean.chapterProject}" required="true"
										widgetVar="projectWidget"
										requiredMessage="Chapter Project is a required value"
										panelStyle="width:150px" effect="fade" style="width:150px"
										filter="true" filterMatchMode="startsWith"
										disabled="#{jJChapterBean.disabledProject}">

										<f:converter
											converterId="com.starit.janjoonweb.ui.mb.converter.JJProjectConverter" />
										<f:selectItem itemLabel="#{jJChapterBean.chapterProject.name}"
											itemValue="#{jJChapterBean.chapterProject}" />
										<f:selectItems value="#{jJChapterBean.chapterProjectList}"
											var="c" itemLabel="#{c.name}" itemValue="#{c}" />
										<p:ajax process="@this" partialSubmit="true"
											update="chapterTreeSingle parent"
											listener="#{jJChapterBean.handleSelectProject()}" />
									</p:selectOneMenu>
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<h:outputText for="parent"
										value="#{messages.specification_chapter_parent_label}" />
									<p:selectOneMenu id="parent"
										value="#{jJChapterBean.parentChapter}"
										panelStyle="width:150px" effect="fade" style="width:160px"
										filter="true" filterMatchMode="startsWith"
										widgetVar="parentWidget">
										<f:converter
											converterId="com.starit.janjoonweb.ui.mb.converter.JJChapterConverter" />
										<f:selectItem itemLabel="#{jJChapterBean.parentChapter.name}"
											itemValue="#{jJChapterBean.parentChapter}" />
										<f:selectItems value="#{jJChapterBean.chapterList}" var="c"
											itemLabel="#{c.name}" itemValue="#{c}" />
										<p:ajax process="@this" partialSubmit="true"
											listener="#{jJChapterBean.handleSelectParentChapter()}" />
									</p:selectOneMenu>
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<p:contextMenu for="chapterTreeSingle">
										<p:menuitem
											value="#{message.specification_chapter_edit_menuitem}"
											actionListener="#{jJChapterBean.editChapter()}"
											process="@this" icon="ui-icon-pencil"
											update="chapterDialogForm" />
										<p:menuitem
											value="#{message.specification_chapter_delete_menuitem}"
											actionListener="#{jJChapterBean.deleteChapter()}"
											process="@this" icon="ui-icon-close"
											update="chapterDialogForm" />
									</p:contextMenu>
									<h:outputText
										value="#{message.specification_chapter_tree_label}" />
									<p:tree id="chapterTreeSingle"
										value="#{jJChapterBean.chapterRoot}" var="nodeChapter"
										selectionMode="single"
										selection="#{jJChapterBean.selectedChapterNode}"
										dynamic="true" cache="false">
										<p:ajax event="select"
											listener="#{jJChapterBean.onNodeSelect}" />
										<p:treeNode>
											<h:outputText value="#{nodeChapter}" />
										</p:treeNode>
									</p:tree>
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<h:outputText
										value="#{messages.specification_chapter_description_label}" />
									<pe:ckEditor id="description" widgetVar="descriptionWidget"
										style="width:388px"
										toolbar="[['Bold','Italic','Underline','Strike','NumberedList','BulletedList','Image','TextColor','BGColor']]"
										value="#{jJChapterBean.chapter.description}" required="true"
										requiredMessage="#{messages.specification_chapter_description_alert}" />

								</p:column>

							</p:row>
							<f:facet name="footer">
								<p:row>
									<p:column colspan="3">
										<p:commandButton
											value="#{message.specification_chapter_save_button}"
											action="#{jJChapterBean.save()}"
											process="@widgetVar(nameWidget) @widgetVar(parentWidget) @widgetVar(descriptionWidget) @widgetVar(projectWidget)"
											update="chapterDialogForm" />
									</p:column>
								</p:row>
							</f:facet>
						</p:panelGrid>
						<p:panelGrid>
							<p:row>
								<p:column colspan="3">
									<p:tree id="leftTreeIncorporated"
										value="#{jJChapterBean.leftRoot}" var="nodeLeft"
										selectionMode="single"
										selection="#{jJChapterBean.selectedLeftNode}" draggable="true"
										droppable="true" dragdropScope="demo" cache="false">
										<p:ajax event="dragdrop"
											listener="#{jJChapterBean.onDragDrop}"
											update=":chapterDialogForm" />
										<p:treeNode>
											<h:outputText value="#{nodeLeft}" />
										</p:treeNode>
									</p:tree>
								</p:column>
								<p:column colspan="3">
									<p:graphicImage alt="Transfer" library="images"
										name="transfer.png" />
								</p:column>
								<p:column colspan="3">
									<p:tree id="RightTreeIncorporated"
										value="#{jJChapterBean.rightRoot}" var="nodeRight"
										selectionMode="single"
										selection="#{jJChapterBean.selectedRightNode}"
										draggable="true" droppable="true" dragdropScope="demo"
										cache="false">
										<p:ajax event="dragdrop"
											listener="#{jJChapterBean.onDragDrop}"
											update=":chapterDialogForm" />
										<p:treeNode>
											<h:outputText value="#{nodeRight}" />
										</p:treeNode>
									</p:tree>
								</p:column>
							</p:row>
						</p:panelGrid>
					</p:scrollPanel>
				</h:form>
			</p:outputPanel>
		</p:dialog>

		<p:confirmDialog id="requirementDeleteDialog"
			header="#{messages.specification_delete_title}"
			message="#{messages.specification_delete_label}"
			widgetVar="requirementDeleteDialogWidget" showEffect="fade"
			hideEffect="fade" severity="alarm">
			<p:outputPanel id="requirementDeletePanel">
				<h:form id="requirementDeleteForm">
					<p:commandButton id="deleteYesButton"
						value="#{messages.specification_delete_no_button}"
						action="#{jJRequirementBean.deleteRequirement}" update=":specForm"
						oncomplete="requirementDeleteDialogWidget.hide()" />
					<p:commandButton id="deleteNoButton"
						value="#{messages.specification_delete_no_button}"
						onclick="requirementDeleteDialogWidget.hide()" type="button" />
				</h:form>
			</p:outputPanel>
		</p:confirmDialog>

		<p:confirmDialog id="requirementReleaseDialog"
			header="#{messages.specification_release_title}"
			message="#{messages.specification_release_label}"
			widgetVar="requirementReleaseDialogWidget" showEffect="fade"
			hideEffect="fade" severity="alarm">
			<p:outputPanel id="requirementReleasePanel">
				<h:form id="requirementReleaseForm">
					<p:commandButton id="releaseYesButton"
						value="#{messages.specification_release_yes_button}"
						action="#{jJRequirementBean.releaseRequirement}"
						update=":specForm"
						oncomplete="requirementReleaseDialogWidget.hide()" />
					<p:commandButton id="releaseNoButton"
						value="#{messages.specification_release_no_button}"
						onclick="requirementReleaseDialogWidget.hide()" type="button" />
				</h:form>
			</p:outputPanel>
		</p:confirmDialog>

		<p:dialog id="requirementImportDialog"
			header="#{jJRequirementBean.message}" modal="true"
			widgetVar="requirementImportDialogWidget" dynamic="true"
			resizable="false">
			<p:ajax event="close" update=":specForm"
				listener="#{jJRequirementBean.closeDialogImport}" />
			<p:layout style="min-width:500px;min-height:500px;">
				<p:layoutUnit position="center">
					<p:outputPanel id="importPanel">
						<h:form id="importForm">
							<p:growl id="msg" />
							<p:panelGrid style="margin-top:10px">
								<p:row>
									<p:column>
										<h:outputText
											value="#{messages.specification_import_project_label}" />
										<p:selectOneMenu id="projectSelectOneMenu"
											value="#{jJRequirementBean.importProject}"
											panelStyle="width:150px" effect="fade" style="width:160px"
											filter="true" filterMatchMode="startsWith">
											<f:converter
												converterId="com.starit.janjoonweb.ui.mb.converter.JJProjectConverter" />
											<f:selectItem
												itemLabel="#{jJRequirementBean.importProject.name}"
												itemValue="#{jJRequirementBean.importProject}" />
											<f:selectItems value="#{jJRequirementBean.importProjectList}"
												var="p" itemLabel="#{p.name}" itemValue="#{p}" />
											<p:ajax process="@this" partialSubmit="true"
												listener="#{jJRequirementBean.handelSelectImportProject}"
												update="importDataTable :importForm:importButton" />
										</p:selectOneMenu>
									</p:column>
									<p:column>
										<h:outputText
											value="#{messages.specification_import_category_label}" />
										<p:selectOneMenu id="categorySelectOneMenu"
											value="#{jJRequirementBean.importCategory}"
											panelStyle="width:150px" effect="fade" style="width:160px"
											filter="true" filterMatchMode="startsWith">
											<f:converter
												converterId="com.starit.janjoonweb.ui.mb.converter.JJCategoryConverter" />
											<f:selectItem
												itemLabel="#{jJRequirementBean.importCategory.name}"
												itemValue="#{jJRequirementBean.importCategory}" />
											<f:selectItems
												value="#{jJRequirementBean.importCategoryList}" var="p"
												itemLabel="#{p.name}" itemValue="#{p}" />
											<p:ajax process="@this" partialSubmit="true"
												listener="#{jJRequirementBean.handelSelectImportCategory}"
												update="importDataTable :importForm:importButton" />
										</p:selectOneMenu>
									</p:column>

								</p:row>
								<p:row>

									<p:column>
										<h:outputText
											value="#{messages.specification_import_product_label}" />
										<p:selectOneMenu id="productSelectOneMenu"
											value="#{jJRequirementBean.importProduct}"
											panelStyle="width:150px" effect="fade" style="width:160px"
											filter="true" filterMatchMode="startsWith">
											<f:converter
												converterId="com.starit.janjoonweb.ui.mb.converter.JJProductConverter" />
											<f:selectItem
												itemLabel="#{jJRequirementBean.importProduct.name}"
												itemValue="#{jJRequirementBean.importProduct}" />
											<f:selectItems value="#{jJRequirementBean.importProductList}"
												var="p" itemLabel="#{p.name}" itemValue="#{p}" />
											<p:ajax process="@this" partialSubmit="true"
												listener="#{jJRequirementBean.handelSelectImportProduct}"
												update="importDataTable versionSelectOneMenu :importForm:importButton" />
										</p:selectOneMenu>
									</p:column>
									<p:column>
										<h:outputText
											value="#{messages.specification_import_version_label}" />
										<p:selectOneMenu id="versionSelectOneMenu"
											value="#{jJRequirementBean.importVersion}"
											panelStyle="width:150px" effect="fade" style="width:160px"
											filter="true" filterMatchMode="startsWith"
											disabled="#{jJRequirementBean.disableImportVersion}">

											<f:converter
												converterId="com.starit.janjoonweb.ui.mb.converter.JJVersionConverter" />

											<f:selectItem
												itemLabel="#{jJRequirementBean.importVersion.name}"
												itemValue="#{jJRequirementBean.importVersion}" />
											<f:selectItems value="#{jJRequirementBean.importVersionList}"
												var="v" itemLabel="#{v.name}" itemValue="#{v}" />
											<p:ajax process="@this" partialSubmit="true"
												listener="#{jJRequirementBean.handelSelectImportVersion}"
												update="importDataTable :importForm:importButton" />
										</p:selectOneMenu>
									</p:column>
								</p:row>
								<p:row>
									<p:column>
										<h:outputText
											value="#{messages.specification_import_status_label}" />
										<p:selectOneMenu id="statusSelectOneMenu"
											value="#{jJRequirementBean.importStatus}"
											panelStyle="width:150px" effect="fade" style="width:160px"
											filter="true" filterMatchMode="startsWith">
											<f:converter
												converterId="com.starit.janjoonweb.ui.mb.converter.JJStatusConverter" />
											<f:selectItem
												itemLabel="#{jJRequirementBean.importStatus.name}"
												itemValue="#{jJRequirementBean.importStatus}" />
											<f:selectItems value="#{jJRequirementBean.importStatusList}"
												var="p" itemLabel="#{p.name}" itemValue="#{p}" />
											<p:ajax process="@this" partialSubmit="true"
												listener="#{jJRequirementBean.handelSelectImportStatus}"
												update="importDataTable :importForm:importButton" />
										</p:selectOneMenu>
									</p:column>
								</p:row>
							</p:panelGrid>

							<p:dataTable id="importDataTable" var="format" scrollable="true"
								style="width:500px;" scrollHeight="300"
								value="#{jJRequirementBean.importFormats}">
								<f:facet name="header">
									<h:outputText
										value="#{messages.specification_import_table_title}" />
								</f:facet>

								<p:column style="width:30%">
									<f:facet name="header">
										<p:row>
											<p:column>
												<p:selectBooleanCheckbox
													value="#{jJRequirementBean.copyRequirements}">
													<p:ajax update="importDataTable :importForm:importButton"
														listener="#{jJRequirementBean.copyRequirements}" />
												</p:selectBooleanCheckbox>
											</p:column>
											<p:column>
												<h:outputText
													value="#{messages.specification_import_requirement_header}" />
											</p:column>
										</p:row>
									</f:facet>

									<p:selectBooleanCheckbox value="#{format.copyRequirement}">
										<p:ajax update="importDataTable :importForm:importButton"
											listener="#{jJRequirementBean.copyRequirement}" />
									</p:selectBooleanCheckbox>
									<h:outputText value="#{format.requirement.name}" />
								</p:column>
								<p:column style="width:30%">
									<f:facet name="header">
										<p:row>
											<p:column>
												<p:selectBooleanCheckbox
													value="#{jJRequirementBean.copyTestcases}">
													<p:ajax update="importDataTable"
														listener="#{jJRequirementBean.copyTestcases}" />
												</p:selectBooleanCheckbox>
											</p:column>
											<p:column>
												<h:outputText
													value="#{messages.specification_import_testcase_header}" />
											</p:column>
										</p:row>
									</f:facet>

									<p:selectBooleanCheckbox value="#{format.copyTestcase}">
										<p:ajax update="importDataTable"
											listener="#{jJRequirementBean.copyTestcase}" />
									</p:selectBooleanCheckbox>

								</p:column>
								<p:column style="width:30%">
									<f:facet name="header">
										<p:row>
											<p:column>
												<p:selectBooleanCheckbox
													value="#{jJRequirementBean.copyChapters}">
													<p:ajax update="importDataTable"
														listener="#{jJRequirementBean.copyChapters}" />
												</p:selectBooleanCheckbox>
											</p:column>
											<p:column>
												<h:outputText
													value="#{messages.specification_import_chapter_header}" />
											</p:column>
										</p:row>
									</f:facet>

									<p:selectBooleanCheckbox value="#{format.copyChapter}">
										<p:ajax update="importDataTable"
											listener="#{jJRequirementBean.copyChapter}" />
									</p:selectBooleanCheckbox>
								</p:column>
							</p:dataTable>

							<p:commandButton id="importButton" value="Import"
								style="float: right;"
								disabled="#{jJRequirementBean.disableImportButton}"
								action="#{jJRequirementBean.importRequirement()}" />
						</h:form>
					</p:outputPanel>
				</p:layoutUnit>
			</p:layout>
		</p:dialog>
	</ui:define>
</ui:composition>
</html>
