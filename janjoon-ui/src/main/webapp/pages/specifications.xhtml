<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="../templates/template.xhtml">
	<ui:define name="head">
		<style type="text/css">
.ui-datatable-tablewrapper {
	margin: auto;
}
</style>
	</ui:define>
	<ui:define name="content">
		<f:event type="preRenderComponent"
			oncomplete="PF('blockUIWidget').unblock()"
			listener="#{jJRequirementBean.initDataTabels}" />
		<h:form id="categoryForm" style="text-align: center;">
			<p:overlayPanel id="category-menu" for="show-category-menu"
				hideEffect="clip" widgetVar="category-menu"
				styleClass="ShowOnMobile">
				<h:panelGroup layout="block" styleClass="Container">
					<c:forEach items="#{jJRequirementBean.categoryList}" var="category">
						<h:panelGroup layout="block" styleClass="Container100">
							<h:panelGroup layout="block" styleClass="ContainerIndent">
								<p:selectBooleanButton value="#{category.checked}"
									title="#{loginBean.checkMessage(category)}"
									styleClass="Container100"
									onLabel="#{loginBean.checkMessage(category)}"
									offLabel="#{loginBean.checkMessage(category)}"
									onIcon="fa fa-check Fs16 Yellow"
									offIcon="fa fa-close Fs16 White"
									id="Mcategory_#{category.category.id}">
									<p:ajax
										listener="#{jJRequirementBean.updateTemplate(category.category.id,null,true,category.checked)}"
										update="@form" onstart="PF('blockUIWidget').block()"
										oncomplete="PF('blockUIWidget').unblock();updateDataTable();" />
								</p:selectBooleanButton>
							</h:panelGroup>
						</h:panelGroup>
					</c:forEach>
				</h:panelGroup>
			</p:overlayPanel>
			<h:panelGroup layout="block" styleClass="Container">
				<h:panelGroup layout="block"
					styleClass="ShowOnDesktop Container60 Responsive100">
					<h:panelGrid styleClass="ShowOnDesktop"
						columns="#{fn:length(jJRequirementBean.categoryList)}">
						<c:forEach items="#{jJRequirementBean.categoryList}"
							var="category">
							<p:selectBooleanButton value="#{category.checked}"
								styleClass="Fs10" id="category_#{category.category.id}"
								onLabel="#{loginBean.checkMessage(category)}"
								offLabel="#{loginBean.checkMessage(category)}"
								onIcon="fa fa-check Fs16 Yellow"
								offIcon="fa fa-close Fs16 White"
								title="#{loginBean.checkMessage(category)}"
								style="#{jJRequirementBean.getMarginLeft(category)}">
								<p:ajax
									listener="#{jJRequirementBean.updateTemplate(category.category.id,null,true,category.checked)}"
									update="@form" onstart="PF('blockUIWidget').block()"
									oncomplete="PF('blockUIWidget').unblock();updateDataTable();" />
							</p:selectBooleanButton>
						</c:forEach>
					</h:panelGrid>
				</h:panelGroup>
				<h:panelGrid columns="2"
					styleClass="Container15 Responsive ui-fluid">
					<p:commandButton icon="fa fa-bars Fs20" id="show-category-menu"
						title="Category" styleClass="ShowOnMobile" />
					<p:inputText id="globalFilter"
						placeholder="#{messages.specification_table_requirement_filter}"
						value="#{jJRequirementBean.filterValue}">
						<p:ajax event="keyup" listener="#{jJRequirementBean.filterTable}"
							oncomplete="updateDataTable();" />
					</p:inputText>
				</h:panelGrid>
				<h:panelGrid columns="5"
					styleClass="Container20 Responsive ui-fluid" style="float:right;">
					<p:inputSwitch id="mineSpec" value="#{jJRequirementBean.mine}"
						offLabel="#{messages.specification_table_requirement_all}"
						onLabel="#{messages.specification_table_requirement_mine}">
						<p:ajax onstart="PF('blockUIWidget').block()" event="change"
							oncomplete="PF('blockUIWidget').unblock()"
							listener="#{jJRequirementBean.filterTable}" />
					</p:inputSwitch>
					<p:commandButton icon="fa fa-cloud-download Fs20"
						disabled="#{jJRequirementBean.disabledExport}"
						actionListener="#{jJRequirementBean.loadImportFormat()}"
						update=":requirementImportPanel" resetValues="true"
						onstart="PF('blockUIWidget').block()"
						oncomplete="PF('blockUIWidget').unblock();PF('requirementImportDialogWidget').show()"
						title="#{messages.specification_import_button}" />

					<p:commandButton icon="fa fa-arrow-up Fs20"
						disabled="#{jJProjectBean.project == null}"
						update=":importXMLForm" onstart="PF('blockUIWidget').block()"
						rendered="#{loginBean.authorisationService.wRequiement}"
						oncomplete="PF('blockUIWidget').unblock();PF('requirementImportXMLDialogWidget').show()"
						title="#{messages.specification_importxml_button}" />

					<p:commandButton id="reloadBtn" icon="fa fa-refresh Fs20"
						onstart="PF('blockUIWidget').block()"
						actionListener="#{jJRequirementBean.reloadPage}"
						title="#{messages.label_refresh}" update="globalFilter mineSpec" />

					<p:commandButton id="colorBtn" icon="fa fa-info-circle Fs20"
						styleClass="Fright BlueButton ShowOnDesktop" type="button"
						title="#{messages.specification_video_help_title}" />
				</h:panelGrid>

			</h:panelGroup>
			<p:overlayPanel id="colorPanel" for="colorBtn" hideEffect="fade"
				styleClass="Container50 Responsive50 ShowOnDesktop">
				<p:panelGrid>
					<f:facet name="header">
						<p:row>
							<p:column colspan="12">#{messages.specification_color_title}</p:column>
						</p:row>
					</f:facet>
					<p:row>
						<p:column colspan="2" styleClass="UnLinked">
							<p:outputLabel style="color: #fff;"
								value="#{messages.specification_color_RequirementNotLinked_label}" />
						</p:column>
						<p:column colspan="2" styleClass="Specified">
							<p:outputLabel style="color: #fff;"
								value="#{messages.specification_color_RequirementNoTask_label}" />
						</p:column>
						<p:column colspan="2" styleClass="Progress">
							<p:outputLabel style="color: #fff;"
								value="#{messages.specification_color_RequirementInProcess_label}" />
						</p:column>
						<p:column colspan="2" styleClass="InTesting">
							<p:outputLabel style="color: #fff;"
								value="#{messages.specification_color_RequirementFinishedTestProcess_label}" />
						</p:column>
						<p:column colspan="2" styleClass="Finished">
							<p:outputLabel style="color: #fff;"
								value="#{messages.specification_color_RequirementFinishedSuccessed_label}" />
						</p:column>
					</p:row>
				</p:panelGrid>
			</p:overlayPanel>
		</h:form>
		<h:form id="specForm" style="overflow:hidden;width:100%">
			<p:remoteCommand name="updateDataTable" update="specForm"
				oncomplete="PF('blockUIWidget').unblock()" />
			<c:forEach items="#{jJRequirementBean.tableDataModelList}"
				var="tableDataModel" varStatus="loop">
				<f:event type="preRenderView" listener="#{loginBean.updateGrowl}"
					oncomplete="PF('dataTable_#{loop.index}_Widget').clearFilters();" />
				<h:panelGroup layout="block"
					styleClass="#{jJRequirementBean.getTableDataModelSizePct(tableDataModel)}"
					rendered="#{tableDataModel.rendered}"
					style="#{jJRequirementBean.getDisplay(tableDataModel)}#{jJRequirementBean.getTableDataModelMargin(tableDataModel)}">
					<h:panelGroup layout="block" rendered="#{tableDataModel.expanded}"
						styleClass="Container33">
						<p:tree id="chapterTree" value="#{tableDataModel.chapterTree}"
							style="height: 580px;background: #F2F2F2;width: auto;" var="node"
							selectionMode="single" rendered="#{tableDataModel.expanded}"
							dynamic="true">
							<p:ajax event="select"
								listener="#{jJRequirementBean.onNodeSelect}"
								onstart="PF('blockUIWidget').block()"
								oncomplete="PF('dataTable_#{loop.index}_Widget').filter();PF('blockUIWidget').unblock()" />

							<p:treeNode type="withOutChapter">
								<h:outputText styleClass="Fs14"
									value="#{messages.specification_tree_withOutChapter}" />
							</p:treeNode>
							<p:treeNode type="chapter">
								<h:outputText styleClass="Fs14"
									value="CH-#{node.id}-#{node.name}" />
							</p:treeNode>
							<p:treeNode type="category">
								<h:outputText styleClass="Fs16"
									value="C-#{node.id}-#{loginBean.checkMessage(node)}" />
							</p:treeNode>
						</p:tree>
					</h:panelGroup>
					<h:panelGroup layout="block" rendered="#{tableDataModel.rendered}"
						styleClass="#{tableDataModel.tableStyle}">
						<p:dataTable id="categoryTable_#{tableDataModel.id}" var="reqUtil"
							value="#{tableDataModel}" lazy="true" sortMode="multiple"
							resizableColumns="false" styleClass="requirement-table"
							emptyMessage="#{messages.label_notRecordFound}"
							rowKey="#{reqUtil.requirement.id}" editable="true"
							editMode="cell" rendered="#{tableDataModel.rendered}"
							selectionMode="single" widgetVar="dataTable_#{loop.index}_Widget"
							paginator="true" rows="7" paginatorPosition="bottom"
							paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
							rowsPerPageTemplate="7,15,30">
							<!-- 							<p:ajax event="rowDblselect" -->
							<!-- 								onstart="PF('blockUIWidget').block()" -->
							<!-- 								oncomplete="PF('blockUIWidget').unblock();PF('requirementDialogWidget').show()" -->
							<!-- 								update=":requirementDialogPanel :requirementDialogHeader" -->
							<!-- 								disabled="#{!loginBean.authorisationService.wRequiement}" -->
							<!-- 								listener="#{jJRequirementBean.onRowDblClckSelect}" /> -->
							<f:facet name="header">
								<h:panelGroup layout="block" styleClass="Container">
									<h:panelGroup layout="block" style="float: right !important;"
										styleClass="Container40 Responsive100 Fs20">
										<h:outputText style="font-family: 'roboto_condensedlight';"
											value="#{loginBean.checkMessage(tableDataModel.category)}" />
									</h:panelGroup>
									<h:panelGroup layout="block"
										styleClass="Container60 Responsive100 Fleft">
										<p:commandButton icon="fa fa-arrows-h F20"
											onstart="PF('blockUIWidget').block()" style="float: left;"
											oncomplete="PF('dataTable_#{loop.index}_Widget').filter();PF('blockUIWidget').unblock();updateDataTable();"
											actionListener="#{jJRequirementBean.expandTable(tableDataModel)}"
											title="#{messages.specification_expand_button}" />
										<p:commandButton id="manageChapterButton"
											icon="fa fa-folder Fs20" title="#{jJChapterBean.warnMessage}"
											update=":chapterDialogPanel" resetValues="true"
											style="margin-left: 8%;float: left;"
											disabled="#{jJChapterBean.disabledChapter or jJProjectBean.project == null}"
											actionListener="#{jJChapterBean.loadData(tableDataModel.categoryId)}"
											onstart="PF('blockUIWidget').block()"
											oncomplete="PF('blockUIWidget').unblock();PF('chapterDialogWidget').show()" />
										<p:commandButton style="margin-left: 8%;float: left;"
											actionListener="#{jJChapterBean.updateCategoryId(tableDataModel,jJRequirementBean)}"
											title="#{messages.specification_req_exportTo}"
											resetValues="true" onclick="PF('exportMenuWidget').show();"
											update=":exportMenuPanel" icon="fa fa-arrow-down Fs20">
											<f:setPropertyActionListener value="#{tableDataModel}"
												target="#{jJRequirementBean.categoryDataModel}" />
										</p:commandButton>
										<p:commandButton id="newRequirementButton"
											style="margin-left: 8%;float: left;"
											icon="fa fa-plus-square Fs20" resetValues="true"
											title="#{loginBean.authorisationService.wRequiementMSG}"
											disabled="#{jJRequirementBean.disabledRequirement or !loginBean.authorisationService.wRequiement}"
											actionListener="#{jJRequirementBean.newRequirement(tableDataModel.categoryId)}"
											update=":requirementDialogPanel :requirementDialogHeader"
											onstart="PF('blockUIWidget').block()"
											oncomplete="PF('blockUIWidget').unblock();PF('requirementDialogWidget').show()" />
									</h:panelGroup>
								</h:panelGroup>

							</f:facet>
							<p:column style="text-align: center;">
								<p:commandLink
									actionListener="#{jJRequirementBean.onrate(reqUtil.requirement)}"
									id="rate"
									update=":growlForm :messageCreationForm :headerForm:communicationButton @this"
									onstart="PF('blockUIWidget').block()"
									oncomplete="PF('blockUIWidget').unblock()">

									<p:graphicImage
										name="#{!jJRequirementBean.isRated(reqUtil.requirement) ? 'blackstar.ico' : 'yelstar.ico'}"
										width="16" height="16" cache="false" library="images"
										title="#{!jJRequirementBean.isRated(reqUtil.requirement) ? messages.requirement_subscription_rate_title : messages.requirement_subscription_cancel_rate_title}" />

								</p:commandLink>
							</p:column>

							<p:column filterBy="#{reqUtil.style}" filterMatchMode="exact"
								styleClass="requirement-column">
								<f:facet name="filter">
									<p:selectOneMenu var="type"
										panelStyleClass="specSelectOneMenuPanel"
										styleClass="specSelectOneMenu"
										value="#{tableDataModel.rowStyleClassFilter}"
										onchange="PF('dataTable_#{loop.index}_Widget').filter()">
										<f:attribute name="optionClasses" value="true" />
										<f:selectItem itemLabel="#{messages.label_all}"
											itemValue="#{null}" />
										<f:selectItem itemValue="UnLinked"
											itemLabel="#{messages.specification_UnLinked}" />
										<f:selectItem itemValue="Progress"
											itemLabel="#{messages.specification_Progress}" />
										<f:selectItem itemValue="Finished"
											itemLabel="#{messages.specification_Finished}" />
										<f:selectItem itemValue="InTesting"
											itemLabel="#{messages.specification_InTesting}" />
										<f:selectItem itemValue="Specified"
											itemLabel="#{messages.specification_Specified}" />
										<p:column>
											<h:outputText
												value="#{type != null ? messages['specification_'.concat(type)] : messages.label_all}" />
										</p:column>
										<p:ajax event="change" onstart="PF('blockUIWidget').block()"
											update="@this" oncomplete="PF('blockUIWidget').unblock();" />

									</p:selectOneMenu>
								</f:facet>
								<p:cellEditor>
									<f:facet name="output">
										<h:panelGroup
											style="display: block;line-height: 1.5;white-space: pre-wrap;max-height: 45px;overflow: hidden;word-wrap: break-word;text-overflow: ellipsis">
											<h:outputText
												value="#{messages['specification_'.concat(reqUtil.style)]}"
												styleClass="#{reqUtil.style} Fs14" />

											<h:outputText id="reqContent" styleClass="Fs16"
												value="    ID:#{reqUtil.requirement.id} #{reqUtil.requirement.name}" />
										</h:panelGroup>

										<p:tooltip id="toolTipContent" for="reqContent"
											showEffect="fade" hideEffect="fade" style="width:300px">
											<p:panelGrid style="width:300px">
												<f:facet name="header">
													<p:row>
														<p:column>
															<h:outputText style="font-weight: bold;"
																value="Requirement: #{reqUtil.requirement.name}" />
														</p:column>
													</p:row>
												</f:facet>
												<p:row>
													<p:column>
														<p:outputLabel style="font-weight: bold;" for="tolDesc"
															value="Description :" />
														<h:outputText id="tolDesc" escape="false"
															style="width:300px" styleClass="Gray"
															value="#{reqUtil.requirement.description}" />
													</p:column>
												</p:row>
											</p:panelGrid>
										</p:tooltip>
									</f:facet>
									<f:facet name="input">

										<p:panelGrid style="border-style: groove;border-color: black;">
											<f:facet name="header">
												<p:row>
													<p:column>
														<h:outputText
															style="font-weight: bold;white-space: pre-wrap;"
															value="Requirement: #{reqUtil.requirement.name}" />
													</p:column>
												</p:row>
											</f:facet>
											<p:row>
												<p:column>
													<p:outputLabel style="font-weight: bold;" for="expDesc"
														value="Description :" />
													<br />
													<h:outputText id="expDesc" readonly="true" escape="false"
														value="#{reqUtil.requirement.description}"
														style="white-space: normal;" />
												</p:column>
											</p:row>
											<p:row>
												<p:column>
													<p:outputLabel style="font-weight: bold;" for="expStyle"
														value="Type:  " />
													<h:outputText id="expStyle"
														value="#{messages['specification_'.concat(reqUtil.style)]}"
														styleClass="#{reqUtil.style}" />
												</p:column>
											</p:row>
											<p:row rendered="#{reqUtil.requirement.note != null}">
												<p:column>
													<p:outputLabel style="font-weight: bold;" for="expNote"
														value="Note :" />
													<br />
													<h:outputText id="expNote" readonly="true" escape="false"
														style="white-space: normal;max-height: 127px;display: block;width: 100px;overflow: hidden;word-wrap: break-word;text-overflow: ellipsis"
														value="#{reqUtil.requirement.note}" />
												</p:column>
											</p:row>
										</p:panelGrid>

									</f:facet>
								</p:cellEditor>
							</p:column>
							<p:column exportable="false" style="text-align: center;"
								rendered="#{!jJRequirementBean.expand or tableDataModel.expanded}">
								<p:commandButton id="viewButton" type="button"
									icon="fa fa-list Fs20" styleClass="BlueButton littleButton" />
								<p:menu overlay="true" trigger="viewButton" my="right top"
									at="right bottom">
									<p:menuitem action="#{jJRequirementBean.requirementInfo}"
										title="#{messages.specification_table_actions_viewButton}"
										value="#{messages.label_view}" ajax="false" 
										icon="fa fa-eye Fs16" onclick="target='_blank'">
										<f:setPropertyActionListener value="#{reqUtil.requirement}"
											target="#{jJRequirementBean.requirement}" />
									</p:menuitem>
									<p:menuitem id="filterButton"
										value="  #{messages[jJRequirementBean.filterButton]}"
										icon="fa fa-search Fs16" onstart="PF('blockUIWidget').block()"
										action="#{jJRequirementBean.viewLinks}"
										oncomplete="PF('blockUIWidget').unblock();updateDataTable();">
										<f:setPropertyActionListener value="#{reqUtil.requirement}"
											target="#{jJRequirementBean.viewLinkRequirement}" />
									</p:menuitem>

									<!-- 									<p:menuitem id="editButton" icon="fa fa-pencil Fs16" -->
									<!-- 										action="#{jJRequirementBean.editRequirement()}" -->
									<!-- 										onstart="PF('blockUIWidget').block()" -->
									<!-- 										oncomplete="PF('blockUIWidget').unblock();PF('requirementDialogWidget').show()" -->
									<!-- 										update=":requirementDialogPanel :requirementDialogHeader" -->
									<!-- 										value="#{messages.specification_table_actions_editButton}" -->
									<!-- 										disabled="#{jJRequirementBean.getDisabledEdit(reqUtil.requirement) or !loginBean.authorisationService.wRequiement}"> -->
									<!-- 										<f:setPropertyActionListener value="#{reqUtil.requirement}" -->
									<!-- 											target="#{jJRequirementBean.requirement}" /> -->
									<!-- 									</p:menuitem> -->

									<p:menuitem id="mindMapButton"
										value="#{messages.specification_table_actions_mapButton}"
										title="#{messages.specification_table_actions_mindMapButton}"
										icon="fa fa-search Fs16" onstart="PF('blockUIWidget').block()"
										action="#{jJRequirementBean.initReqMindMap}"
										oncomplete="PF('blockUIWidget').unblock()"
										update=":mindMapForm">
										<f:setPropertyActionListener value="#{reqUtil.requirement}"
											target="#{jJRequirementBean.requirement}" />
									</p:menuitem>

									<p:menuitem id="deleteButton" icon="fa fa-trash Fs16"
										title="#{messages.specification_table_actions_deleteButton}"
										oncomplete="PF('requirementDeleteDialogWidget').show()"
										value="#{messages.specification_table_actions_deleteButton}">
										<f:setPropertyActionListener value="#{reqUtil.requirement}"
											target="#{jJRequirementBean.requirement}" />
									</p:menuitem>
								</p:menu>
							</p:column>
							<f:facet name="footer">
								<p:accordionPanel dynamic="true" styleClass="mineAccordion"
									activeIndex="#{tableDataModel.activeIndex}" cache="false">
									<p:ajax event="tabClose"
										listener="#{jJRequirementBean.onTabClose(tableDataModel.categoryId)}" />
									<p:ajax event="tabChange"
										listener="#{jJRequirementBean.calculateCovCom(tableDataModel.categoryId)}"
										onstart="PF('blockUIWidget').block()"
										oncomplete="PF('blockUIWidget').unblock()" />
									<p:tab title="#{messages.specification_progress_footer}">
										<p:row>
											<p:progressBar id="coverage"
												value="#{tableDataModel.coverageProgress}"
												labelTemplate="#{messages.specification_coverage_progress} {value}%"
												displayOnly="true" />
											<br />
										</p:row>
										<p:row>
											<br />
											<p:progressBar id="completion"
												value="#{tableDataModel.completionProgress}"
												labelTemplate="#{messages.specification_completion_progress} {value}%"
												displayOnly="true" />
										</p:row>
									</p:tab>
								</p:accordionPanel>
							</f:facet>
						</p:dataTable>
					</h:panelGroup>
				</h:panelGroup>
			</c:forEach>
		</h:form>

		<p:hotkey bind="esc" handler="PF('requirementDialogWidget').hide()" />
		<p:hotkey bind="alt+enter"
			handler="PF('requirementSaveWidget').jq.click()" />
		<p:dialog id="requirementDialog" draggable="false" responsive="true"
			header="#{messages[jJRequirementBean.message]}" modal="true"
			widgetVar="requirementDialogWidget" dynamic="true" resizable="false"
			appendTo="@(body)"
			style="/*padding:0px;min-height:320px;height:80%;max-height:700px;min-width:300px;width:80% !important;max-width:1200px !important;*/">
			<p:ajax event="close"
				listener="#{jJRequirementBean.closeDialog(false,true)}"
				onstart="PF('blockUIWidget').block()"
				oncomplete="PF('blockUIWidget').unblock()" />
			<f:facet name="header">
				<p:outputLabel id="requirementDialogHeader"
					value="#{messages[jJRequirementBean.message]}" />
			</f:facet>
			<p:outputPanel id="requirementDialogPanel">
				<ui:include src="requirementDialog.xhtml" />
			</p:outputPanel>
		</p:dialog>

		<p:hotkey bind="esc" handler="PF('chapterDialogWidget').hide()" />
		<p:dialog id="chapterDialog" draggable="false" appendTo="@(body)"
			header="#{messages.specification_chapter_header}" responsive="true"
			modal="true" widgetVar="chapterDialogWidget" dynamic="true"
			resizable="false">
			<p:ajax event="close" onstart="PF('blockUIWidget').block()"
				oncomplete="PF('blockUIWidget').unblock();updateDataTable();"
				listener="#{jJChapterBean.closeDialog}" />
			<p:outputPanel id="chapterDialogPanel">
				<ui:include src="chapterDialog.xhtml" />
			</p:outputPanel>
		</p:dialog>

		<p:confirmDialog id="requirementDeleteDialog"
			header="#{messages.specification_delete_title}"
			message="#{messages.specification_delete_label}"
			widgetVar="requirementDeleteDialogWidget" showEffect="fade"
			severity="alarm">
			<p:outputPanel id="requirementDeletePanel">
				<h:form id="requirementDeleteForm">
					<p:commandButton id="deleteYesButton"
						value="#{messages.specification_delete_yes_button}"
						action="#{jJRequirementBean.deleteRequirement}"
						update=":growlForm"
						onstart="PF('requirementDeleteDialogWidget').hide();PF('blockUIWidget').block()"
						oncomplete="PF('blockUIWidget').unblock();updateDataTable();" />
					<p:commandButton id="deleteNoButton"
						value="#{messages.specification_delete_no_button}"
						onclick="PF('requirementDeleteDialogWidget').hide()" type="button" />
				</h:form>
			</p:outputPanel>
		</p:confirmDialog>

		<p:confirmDialog id="requirementReleaseDialog"
			header="#{messages.specification_release_title}"
			message="#{messages.specification_release_label}"
			widgetVar="requirementReleaseDialogWidget" showEffect="fade"
			severity="alarm">
			<p:outputPanel id="requirementReleasePanel">
				<h:form id="requirementReleaseForm">
					<p:commandButton id="releaseYesButton"
						value="#{messages.specification_release_yes_button}"
						action="#{jJRequirementBean.releaseRequirement}"
						update=":growlForm"
						onstart="PF('requirementReleaseDialogWidget').hide();PF('blockUIWidget').block()"
						oncomplete="PF('blockUIWidget').unblock();updateDataTable();" />
					<p:commandButton id="releaseNoButton"
						value="#{messages.specification_release_no_button}"
						onclick="PF('requirementReleaseDialogWidget').hide()"
						type="button" />
				</h:form>
			</p:outputPanel>
		</p:confirmDialog>

		<p:hotkey bind="esc" handler="PF('videoHelpWidget').hide()" />
		<p:dialog id="videoHelpDialog" widgetVar="videoHelpWidget"
			responsive="true" position="center"
			header="#{messages.specification_video_help_title}"
			style="padding:0px;" resizable="false" draggable="false"
			minHeight="500" minWidth="500" showEffect="fade" hideEffect="fade">
			<video width="100%" height="100%" controls="true">
				<source src="https://www.starit.fr/jjtraining.mp4" type="video/mp4" />
			</video>
		</p:dialog>

		<p:hotkey bind="esc"
			handler="PF('requirementImportDialogWidget').hide()" />
		<p:dialog id="requirementImportXMLDialog" draggable="false"
			responsive="true" modal="true"
			header="#{messages.specification_import_title} XML"
			widgetVar="requirementImportXMLDialogWidget" dynamic="true"
			resizable="false">
			<p:outputPanel id="importXMLPanel">
				<h:form id="importXMLForm">
					<p:fileUpload
						fileUploadListener="#{jJRequirementBean.handleImportXML}"
						mode="advanced" dragDropSupport="false"
						oncomplete="updateDataTable();" update=":growlForm :categoryForm"
						sizeLimit="100000" fileLimit="1" allowTypes="/(\.|\/)(xml)$/" />
				</h:form>
			</p:outputPanel>
		</p:dialog>
		<p:dialog id="exportMenu" draggable="false" modal="true"
			responsive="true" widgetVar="exportMenuWidget" dynamic="true"
			resizable="false" header="#{messages.specification_export_title}">
			<p:outputPanel id="exportMenuPanel">
				<h:form id="exportMenuForm">
					<h:panelGroup layout="block" styleClass="Container">
						<h:panelGroup layout="block" styleClass="Container50"
							style="text-align: center;">
							<p:commandLink ajax="false"
								oncomplete="PF('exportMenuWidget').show();"
								onclick="PrimeFaces.monitorDownload(start, stop);">
								<p:graphicImage name="xmlButton.ico" width="64" height="64"
									library="images"
									title="#{messages.specification_req_exportTo} XML" />
								<p:fileDownload
									value="#{jJRequirementBean.categoryDataModel.file}" />
							</p:commandLink>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="Container50"
							style="text-align: center;">
							<p:commandLink onclick="PrimeFaces.monitorDownload(start, stop);"
								ajax="false" oncomplete="PF('exportMenuWidget').show();">
								<p:graphicImage name="pdf.png" width="64" height="64"
									library="images" title="#{jJRequirementBean.warnMessage}" />
								<p:fileDownload value="#{jJChapterBean.preProcessPDF}" />
							</p:commandLink>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="Container50"
							style="text-align: center;">
							<p:commandLink onclick="PrimeFaces.monitorDownload(start, stop);"
								ajax="false" oncomplete="PF('exportMenuWidget').show();">
								<p:graphicImage name="xmlButton.ico" width="64" height="64"
									library="images"
									title="#{messages.specification_req_exportTo} XML" />
								<p:fileDownload
									value="#{jJRequirementBean.categoryDataModel.file}" />
							</p:commandLink>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="Container50"
							style="text-align: center;">
							<p:commandLink onclick="PrimeFaces.monitorDownload(start, stop);"
								ajax="false" oncomplete="PF('exportMenuWidget').show();">
								<p:graphicImage name="pdf.png" width="64" height="64"
									library="images" title="#{jJRequirementBean.warnMessage}" />
								<p:fileDownload value="#{jJChapterBean.preProcessPDF}" />
							</p:commandLink>
						</h:panelGroup>
					</h:panelGroup>
				</h:form>
			</p:outputPanel>
		</p:dialog>
		<p:dialog id="requirementImportDialog" draggable="false"
			responsive="true" header="#{messages.specification_import_title}"
			modal="true" widgetVar="requirementImportDialogWidget" dynamic="true"
			resizable="false">
			<p:ajax event="close" onstart="PF('blockUIWidget').block()"
				oncomplete="PF('blockUIWidget').unblock();updateDataTable();"
				listener="#{jJRequirementBean.closeDialogImport}" />

			<p:outputPanel id="requirementImportPanel">
				<ui:include src="importRequirement.xhtml" />
			</p:outputPanel>
		</p:dialog>

		<p:dialog id="requirementMindMap" responsive="true"
			header="#{messages.specification_MindMap_title}" modal="true"
			draggable="false" widgetVar="requirementMindMap" dynamic="true"
			resizable="true">
			<p:panel>
				<ui:include src="mindMapReq.xhtml" />
			</p:panel>
		</p:dialog>
	</ui:define>
</ui:composition>
</html>
