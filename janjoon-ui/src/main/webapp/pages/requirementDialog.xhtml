<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition>
	<style type="text/css">
/* .cke_chrome { */
/* 	visibility: inherit; */
/* 	width: 600px !important; */
/* } */
.ui-editor {
	height: 250px !important;
}

/* .cke_contents { */
/* 	height: 200px !important; */
/* } */
.cke_bottom {
	display: block;
}
</style>
	<pe:blockUI widgetVar="requirementBlockUIWidget"
		target="requirementDialogPanel">
		<h:panelGrid columns="2">
			<p:graphicImage library="images" name="ajax-loader.gif"
				style="vertical-align: middle;" />
			<h:outputText value="#{messages.label_refresh}"
				style="white-space: nowrap;" />
		</h:panelGrid>
	</pe:blockUI>

	<h:form id="requirementDialogForm" style="padding:0px;">
		<p:panel styleClass="panelDialog ui-fluid">
			<!-- 			<f:facet name="header"> -->
			<!-- 				<p:messages id="msg" showDetail="false" closable="true" /> -->
			<!-- 			</f:facet> -->
			<h:panelGroup layout="block" styleClass="Container100">
				<p:inputText id="nameReq"
					placeholder="#{messages.specification_create_name_watermark}"
					label="#{messages.specification_create_name_label}"
					value="#{jJRequirementBean.requirement.name}" required="true"
					requiredMessage="#{messages.specification_create_name_alert}">
					<f:validateLength maximum="100" />
				</p:inputText>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container25">
				<p:outputLabel for="status" styleClass="ShowOnDesktop"
					value="#{messages.specification_create_status_label}" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container25">
				<p:selectOneMenu id="status"
					value="#{jJRequirementBean.requirementStatus}" required="true"
					requiredMessage="#{messages.specification_create_status_alert}"
					effect="fade" filter="true" filterMatchMode="startsWith"
					disabled="#{jJRequirementBean.disabledStatus}">
					<f:converter
						converterId="com.starit.janjoonweb.ui.mb.converter.JJStatusConverter" />
					<f:selectItems value="#{jJRequirementBean.requirementStatusList}"
						var="req"
						itemLabel="#{loginBean.checkMessage(req)}"
						itemValue="#{req}" />
					<p:ajax partialSubmit="true"
						listener="#{jJRequirementBean.handleSelectStatus()}" />
				</p:selectOneMenu>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container25">
				<p:outputLabel for="project" styleClass="ShowOnDesktop"
					value="#{messages.specification_create_project_label} *" />
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container25">
				<p:selectOneMenu id="project"
					value="#{jJRequirementBean.requirementProject}" effect="fade"
					filter="true" filterMatchMode="startsWith"
					disabled="#{jJRequirementBean.disabledProject}"
					converter="com.starit.janjoonweb.ui.mb.converter.JJProjectConverter">

					<f:selectItems value="#{jJRequirementBean.requirementProjectList}"
						var="req" itemLabel="#{req.name}" itemValue="#{req}" />
					<p:ajax partialSubmit="true"
						onstart="PF('requirementBlockUIWidget').block()"
						oncomplete="PF('requirementBlockUIWidget').unblock()"
						update="lowRequirement mediumRequirement highRequirement chapter"
						listener="#{jJRequirementBean.handleSelectProject()}" />
				</p:selectOneMenu>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container33">
				<p:outputLabel for="product" styleClass="ShowOnDesktop"
					value="#{messages.specification_create_product_label}" />
				<p:selectOneMenu id="product"
					value="#{jJRequirementBean.requirementProduct}" effect="fade"
					filter="true" filterMatchMode="startsWith"
					converter="com.starit.janjoonweb.ui.mb.converter.JJProductConverter">

					<f:selectItem itemValue="#{null}"
						itemLabel="#{messages.specification_create_select_label}" />
					<f:selectItems value="#{jJRequirementBean.requirementProductList}"
						var="req" itemLabel="#{req.name}" itemValue="#{req}" />
					<p:ajax partialSubmit="true" update="version"
						onstart="PF('requirementBlockUIWidget').block()"
						oncomplete="PF('requirementBlockUIWidget').unblock()"
						listener="#{jJRequirementBean.handleSelectProduct()}" />
				</p:selectOneMenu>			
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container33">
				<p:outputLabel for="version" styleClass="ShowOnDesktop"
					value="#{messages.specification_create_version_label}" />
				<p:selectOneMenu id="version"
					value="#{jJRequirementBean.requirementVersion}" effect="fade"
					filter="true" filterMatchMode="startsWith"
					disabled="#{jJRequirementBean.disabledVersion}"
					converter="com.starit.janjoonweb.ui.mb.converter.JJVersionConverter">

					<f:selectItem itemValue="#{null}"
						itemLabel="#{messages.specification_create_select_label}" />
					<f:selectItems value="#{jJRequirementBean.requirementVersionList}"
						var="req" itemLabel="#{req.name}" itemValue="#{req}" />
					<p:ajax partialSubmit="true"
						listener="#{jJRequirementBean.handleSelectVersion()}" />
				</p:selectOneMenu>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container33">
				<p:outputLabel for="chapter" styleClass="ShowOnDesktop"
					value="#{messages.specification_create_chapter_label}:" />
				<p:selectOneMenu id="chapter"
					value="#{jJRequirementBean.requirementChapter}" effect="fade"
					filter="true" filterMatchMode="startsWith"
					converter="com.starit.janjoonweb.ui.mb.converter.JJChapterConverter">

					<f:selectItem itemValue="#{null}"
						itemLabel="#{messages.specification_create_select_label}" />
					<f:selectItems value="#{jJRequirementBean.requirementChapterList}"
						var="req" itemLabel="#{req.name}" itemValue="#{req}" />
					<p:ajax partialSubmit="true"
						listener="#{jJRequirementBean.handleSelectChapter()}" />
				</p:selectOneMenu>
			</h:panelGroup>
			<h:panelGroup layout="block"
				rendered="#{requirementBean.reqDialogReqListrender}"
				styleClass="Container33">
				<p:selectCheckboxMenu id="lowRequirement"
					value="#{jJRequirementBean.selectedLowRequirementsList}"
					label="#{jJRequirementBean.lowCategoryName}" filter="true"
					filterText="Filter" filterMatchMode="contains"
					converter="com.starit.janjoonweb.ui.mb.converter.JJRequirementConverter"
					disabled="#{jJRequirementBean.disabledLowRequirements}">
					<f:selectItems value="#{jJRequirementBean.lowRequirementsList}"
						var="requirement" itemLabel="#{requirement.name}"
						itemValue="#{requirement}" />
					<p:ajax listener="#{jJRequirementBean.handleChangeLow}" />
				</p:selectCheckboxMenu>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container33"
				rendered="#{requirementBean.reqDialogReqListrender}">
				<p:selectCheckboxMenu id="mediumRequirement"
					value="#{jJRequirementBean.selectedMediumRequirementsList}"
					label="#{jJRequirementBean.mediumCategoryName}" filter="true"
					filterText="Filter" filterMatchMode="contains"
					converter="com.starit.janjoonweb.ui.mb.converter.JJRequirementConverter"
					disabled="#{jJRequirementBean.disabledMediumRequirements}">
					<f:selectItems value="#{jJRequirementBean.mediumRequirementsList}"
						var="requirement" itemLabel="#{requirement.name}"
						itemValue="#{requirement}" />
					<p:ajax listener="#{jJRequirementBean.handleChangeMedium}" />
				</p:selectCheckboxMenu>
			</h:panelGroup>
			<h:panelGroup layout="block"
				rendered="#{requirementBean.reqDialogReqListrender}"
				styleClass="Container33">
				<p:selectCheckboxMenu id="highRequirement"
					value="#{jJRequirementBean.selectedHighRequirementsList}"
					label="#{jJRequirementBean.highCategoryName}" filter="true"
					filterText="Filter" filterMatchMode="contains"
					converter="com.starit.janjoonweb.ui.mb.converter.JJRequirementConverter"
					disabled="#{jJRequirementBean.disabledHighRequirements}">
					<f:selectItems value="#{jJRequirementBean.highRequirementsList}"
						var="requirement" itemLabel="#{requirement.name}"
						itemValue="#{requirement}" />
					<p:ajax listener="#{jJRequirementBean.handleChangeHigh}" />
				</p:selectCheckboxMenu>
			</h:panelGroup>
			<h:panelGroup layout="block" styleClass="Container100" style="height: 250px;">
				<p:outputLabel for="description" styleClass="ShowOnDesktop"
					value="#{messages.specification_create_description_label}" />
				<pe:ckEditor id="description"
					toolbar="#{imageStreamer.ckEditorToolBar}" height="25%"
					width="100%"
					customConfig="#{request.contextPath}/resources/js/ckEditor.js"
					value="#{jJRequirementBean.requirement.description}"
					required="true" rendered="#{!loginBean.mobile}"
					requiredMessage="#{messages.specification_create_description_alert}" />

				<p:editor id="descriptionMobile" styleClass="ShowOnMobile"
					style="width:100%;height:25%;margin-left:auto;margin-right:auto;"
					value="#{jJRequirementBean.requirement.description}"
					required="true" rendered="#{loginBean.mobile}"
					requiredMessage="#{messages.specification_create_description_alert}" />

				<p:message for="description" rendered="#{!loginBean.mobile}" />
				<p:message for="descriptionMobile" rendered="#{loginBean.mobile}" />
				<!--h:outputLabel for="description" value="#{request.contextPath}" /-->
			</h:panelGroup>
			<!--div class="Container100" rendered="#{jJRequirementBean.requirement.id != null}">
					<p:dataTable id="testCaseDataTable" var="testCaseModel"
						selection="#{jJRequirementBean.reqSelectedtestCases}"
						rowKey="#{testCaseModel.id}"
						emptyMessage="#{messages.label_notRecordFound}" scrollable="true"
						style="width:100%;" scrollHeight="200"
						value="#{jJRequirementBean.reqtestCases}">
						<p:column selectionMode="multiple"
							style="width:30%;text-align:center" />
						<p:column style="width:70%" headerText="TestCases:">
							<p:commandLink target="_blank" value="#{testCaseModel.name}"
								action="#{jJTestcaseBean.testCaseInfo(testCaseModel.id)}"
								ajax="false" immediate="true">
							</p:commandLink>
						</p:column>
						<f:facet name="footer">
							<p:commandButton
								onstart="PF('requirementBlockUIWidget').block()"
								oncomplete="PF('requirementBlockUIWidget').unblock()"
								disabled="#{empty jJRequirementBean.reqtestCases}"
								update="testCaseDataTable :growlForm"
								process="testCaseDataTable" value="Update"
								action="#{jJRequirementBean.updateReqTestCases(jJTestcaseBean)}" />
							<br />
							<p:inputText id="testcase" style="width:50%;"
								value="#{jJRequirementBean.testCaseName}" placeholder="Nom">
								<f:validateLength maximum="100" />
								<p:ajax event="keyup" update="addTestCase" />
							</p:inputText>								
							<p:commandButton id="addTestCase"
								disabled="#{empty jJRequirementBean.testCaseName}"
								onstart="PF('requirementBlockUIWidget').block()"
								oncomplete="PF('requirementBlockUIWidget').unblock()"
								style="font-size: 1.0em !important;float:right;top: -3px;"
								update="testcase testCaseDataTable :growlForm"
								action="#{jJRequirementBean.addTestCase(jJTestcaseBean)}"
								value="Ajouter TestCase" process="@this,testcase" />
						</f:facet>
					</p:dataTable>
			</div-->
			<h:panelGroup layout="block" styleClass="Container100">
				<p:inputTextarea id="note" rows="3" cols="100"
					placeholder="#{messages.specification_create_note_watermark}"
					value="#{jJRequirementBean.requirement.note}" autoResize="false"
					style="resize: none;width: 600px;margin-left:auto;margin-right:auto;" />
			</h:panelGroup>
			<f:facet name="footer">
				<h:panelGroup layout="block" styleClass="Container33">
					<p:commandButton
						value="#{messages.specification_create_save_button}"
						onstart="PF('requirementBlockUIWidget').block()"
						oncomplete="PF('requirementBlockUIWidget').unblock()"
						action="#{jJRequirementBean.save}" rendered="#{!loginBean.mobile}"
						process="@this,nameReq,status,project,product,version,chapter,description,lowRequirement,mediumRequirement,highRequirement,note"
						widgetVar="requirementSaveWidget" update="@form :growlForm" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="MarRight20 Container33">
					<p:commandButton
						value="#{messages.specification_create_save_button}"
						onstart="PF('requirementBlockUIWidget').block()"
						oncomplete="PF('requirementBlockUIWidget').unblock()"
						action="#{jJRequirementBean.save}" rendered="#{loginBean.mobile}"
						process="@this,nameReq,status,project,product,version,chapter,descriptionMobile,lowRequirement,mediumRequirement,highRequirement,note"
						widgetVar="requirementSaveWidget" update="@form :growlForm" />
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="Container33">
					<p:commandButton id="viewCloseButton" styleClass="GrayBack"
						value="#{messages.label_cancel}"
						oncomplete="PF('blockUIWidget').unblock()"
						onstart="PF('blockUIWidget').block()"
						onclick="PF('requirementDialogWidget').hide()" type="button" />
				</h:panelGroup>
			</f:facet>
		</p:panel>

	</h:form>
</ui:composition>
</html>