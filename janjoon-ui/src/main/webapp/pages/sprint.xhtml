<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition>

	<h:form id="sprintCreationForm" rendered="#{jjsprint.render}">
		<p:growl id="sprintCreationGrowl" showDetail="true" life="2000" />
		<p:panelGrid>
			<f:facet name="header">
				<p:row>
					<p:column colspan="4">Create Sprint</p:column>
				</p:row>
			</f:facet>
			<p:row>
				<p:column>
					<p:outputLabel for="sprintCName" value="Sprint Name:" />
				</p:column>
				<p:column>
					<p:inputTextarea id="sprintCName" value="#{jjsprint.sprint.name}"
						required="true" requiredMessage="Sprint name is empty"
						readonly="#{jjsprint.neditabale}" >
						<f:validateLength maximum="100" />
					</p:inputTextarea>
				</p:column>
				<p:column>
					<p:outputLabel for="sprintcts" value="Sprint Contacts:" />
				</p:column>
				<p:column>
					<p:selectManyMenu id="sprintcts"
						value="#{jjsprint.sprint.contacts}"
						disabled="#{jjsprint.neditabale}"
						converter="com.starit.janjoonweb.ui.mb.converter.JJContactConverter"
						style="width:150px;height:150px" showCheckbox="true">
						<f:selectItems value="#{jJSprintBean.contacts}" var="c"
							itemLabel="#{c.name}" itemValue="#{c}" />
					</p:selectManyMenu>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<p:outputLabel for="sprintCSD" value="Start Date:" />
				</p:column>
				<p:column>
					<p:calendar id="sprintCSD" navigator="true" effect="slideDown"
						pattern="dd/MM/yyyy" required="true" binding="#{startDateCreation}"
						disabled="#{jjsprint.neditabale}"
						value="#{jjsprint.sprint.startDate}" />
				</p:column>
				<p:column>
					<p:outputLabel for="sprintCED" value="end Date:" />
				</p:column>
				<p:column>
					<p:calendar id="sprintCED" navigator="true" effect="slideDown"
						pattern="dd/MM/yyyy" required="true"
						disabled="#{jjsprint.neditabale}"
						value="#{jjsprint.sprint.endDate}" >
						<f:validator validatorId="dateRangeValidator" />
    					<f:attribute name="startDateComponent" value="#{startDateCreation}" />
						</p:calendar>
				</p:column>
			</p:row>
			<f:facet name="footer">
				<p:row>
					<p:column>
						<p:commandButton id="createSprintButton"
							value="#{messages.label_create}"
							disabled="#{jjsprint.neditabale}"
							actionListener="#{jJSprintBean.attrListener}"						
							update=":projecttabview:SprintTabView:sprintCreationForm">
							<f:attribute name="sprintUtilValue" value="#{jjsprint}" />
							<f:attribute name="create" value="create"/>
						</p:commandButton>
						<p:remoteCommand name="createSprint" update=":projecttabview"
							action="#{jJSprintBean.createSprint}"
							onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock();"/>
					</p:column>
					<p:column>
						<p:commandButton value="Done" id="doneButtonr"
							update=":projecttabview" immediate="true"
							disabled="#{!jjsprint.neditabale}"
							action="#{jJSprintBean.doneEvent}"
							onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"
							actionListener="#{jJSprintBean.attrListener}">
							<f:attribute name="sprintUtilValue" value="#{jjsprint}" />
						</p:commandButton>
					</p:column>
					<p:column>
						<p:commandButton value="#{messages.label_create} JJTask"
							disabled="#{!jjsprint.neditabale}" id="createTaskttButton"
							icon="ui-icon-circle-plus" immediate="true"
							onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"
							actionListener="#{jJTaskBean.loadImportFormat}"
							title="#{messages.label_create} JJTask">
							<f:attribute name="sprintUtilValue" value="#{jjsprint}" />
							<f:attribute name="mode" value="scrum" />
						</p:commandButton>
					</p:column>
				</p:row>
			</f:facet>
		</p:panelGrid>

	</h:form>
</ui:composition>
</html>