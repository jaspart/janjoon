<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition>

	<h:form id="sprintCreationForm" rendered="#{jjsprint.render}">
		<p:growl id="sprintCreationGrowl" showDetail="true" life="2000" />
		<p:panelGrid>
			<f:facet name="header">
				<p:row>
					<p:column colspan="4">Create Sprint</p:column>
				</p:row>
			</f:facet>
			<p:row>
				<p:column>
					<p:outputLabel for="sprintCName" value="Sprint Name:" />
				</p:column>
				<p:column>
					<p:inputTextarea id="sprintCName" value="#{jjsprint.sprint.name}"
						required="true" requiredMessage="Sprint name is empty"
						readonly="#{jjsprint.neditabale}" />
				</p:column>
				<p:column>
					<p:outputLabel for="sprintcts" value="Sprint Contacts:" />
				</p:column>
				<p:column>
					<p:selectManyMenu id="sprintcts"
						value="#{jjsprint.sprint.contacts}"
						disabled="#{jjsprint.neditabale}"
						converter="com.starit.janjoonweb.ui.mb.converter.JJContactConverter"
						style="width:150px;height:150px" showCheckbox="true">
						<f:selectItems value="#{jJContactBean.contacts}" var="c"
							itemLabel="#{c.name}" itemValue="#{c}" />
					</p:selectManyMenu>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<p:outputLabel for="sprintCSD" value="Start Date:" />
				</p:column>
				<p:column>
					<p:calendar id="sprintCSD" navigator="true" effect="slideDown"
						pattern="dd/MM/yyyy" required="true"
						disabled="#{jjsprint.neditabale}"
						value="#{jjsprint.sprint.startDate}" />
				</p:column>
				<p:column>
					<p:outputLabel for="sprintCED" value="end Date:" />
				</p:column>
				<p:column>
					<p:calendar id="sprintCED" navigator="true" effect="slideDown"
						pattern="dd/MM/yyyy" required="true"
						disabled="#{jjsprint.neditabale}"
						value="#{jjsprint.sprint.endDate}" />
				</p:column>
			</p:row>
			<f:facet name="footer">
				<p:row>
					<p:column>
						<p:commandButton id="createSprintButton"
							value="#{messages.label_create}"
							disabled="#{jjsprint.neditabale}"
							actionListener="#{jJSprintBean.attrListener}"
							action="#{jJSprintBean.createSprint}" update="@(form)"
							onstart="PF('createSprintBlockUI').block()"
							oncomplete="PF('createSprintBlockUI').unblock()">
							<f:attribute name="sprintUtilValue" value="#{jjsprint}" />
						</p:commandButton>
					</p:column>
					<p:column>
						<p:commandButton value="Done" id="doneButtonr"
							update=":projecttabview:SprintTabView" immediate="true"
							disabled="#{!jjsprint.neditabale}"
							action="#{jJSprintBean.doneEvent}"
							onstart="PF('createSprintBlockUI').block()"
							oncomplete="PF('createSprintBlockUI').unblock()"
							actionListener="#{jJSprintBean.attrListener}">
							<f:attribute name="sprintUtilValue" value="#{jjsprint}" />
						</p:commandButton>
					</p:column>
					<p:column>
						<p:commandButton value="#{messages.label_create} JJTask"
							disabled="#{!jjsprint.neditabale}" id="createTaskttButton"
							icon="ui-icon-circle-plus" immediate="true"
							onstart="PF('createSprintBlockUI').block()"
							oncomplete="PF('createSprintBlockUI').unblock()"
							actionListener="#{jJTaskBean.loadImportFormat}"
							title="#{messages.label_create} JJTask">
							<f:attribute name="sprintUtilValue" value="#{jjsprint}" />
							<f:attribute name="mode" value="scrum" />
<!-- 							<f:setPropertyActionListener value="#{jjsprint}" -->
<!-- 								target="#{jJSprintBean.sprintUtil}" /> -->
						</p:commandButton>
					</p:column>
				</p:row>
			</f:facet>
		</p:panelGrid>

	</h:form>

	<p:dialog id="viewTaskDialog" header="#{messages.label_view} JJTask"
		modal="true" widgetVar="viewTaskDialogWidget" dynamic="true"
		resizable="true" maximizable="true" showEffect="fade"
		hideEffect="explode" draggable="false">
		<p:outputPanel id="viewTaskPanel">
			<h:form id="viewTaskForm" enctype="multipart/form-data">
				<ui:include src="taskDialog.xhtml">
					<ui:param name="JJTask_" value="#{jJTaskBean.task}" />
				</ui:include>
				<p:commandButton id="viewCloseButton"
					value="#{messages.label_close}"
					oncomplete="PF('createSprintBlockUI').unblock()"
					onclick="viewTaskDialogWidget.hide()" type="button" />
			</h:form>
		</p:outputPanel>
	</p:dialog>
	<p:dialog id="createTaskDialog"
		header="#{messages.label_create} JJTask" dynamic="true" modal="true"
		widgetVar="createTaskDialogWidget" showEffect="fade"
		hideEffect="explode">
		<p:ajax event="close"
			update=":projecttabview:SprintTabView:sprintCreationForm"
			listener="#{jJSprintBean.handleDialogCloseEvent}" />
		<p:outputPanel id="createTaskPanel">
			<h:form id="createForm" enctype="multipart/form-data">
				<h:panelGrid id="createTaskPanelGrid" columns="3"
					binding="#{jJSprintBean.createTaskPanelGrid}" styleClass="dialog"
					columnClasses="col1,col2,col3" />
				<p:commandButton id="createTaskSaveButton2"
					rendered="#{jjsprint.render}" value="#{messages.label_save}"
					action="#{jJSprintBean.persistTask}"
					update=":projecttabview:SprintTabView:sprintCreationForm " />
				<p:commandButton id="createTaskSaveButton1"
					rendered="#{!jjsprint.render}" value="#{messages.label_save}"
					action="#{jJSprintBean.persistTask}"
					update=":projecttabview:SprintTabView:sprintForm :projecttabview:SprintTabView:taskListForm" />
				<p:commandButton id="createTaskCloseButton"
					value="#{messages.label_close}"
					onstart="PF('createSprintBlockUI').block()"
					onclick="createTaskDialogWidget.hide()" type="button" />
			</h:form>
		</p:outputPanel>
	</p:dialog>
</ui:composition>
</html>