<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition>
	<style type="text/css">
.chapterTree {
	height: 350px;
	width: 350px;
	overflow-y: auto;
	overflow-x: hidden;
	border: rgba(255, 0, 0, 0);
}

/* .cke_chrome { */
/* 	visibility: inherit; */
/* 	width: 600px !important; */
/* } */
.ui-editor {
	height: 250px !important;
}

/* .cke_contents { */
/* 	height: 200px !important; */
/* } */
.cke_bottom {
	display: block;
}
</style>
	<pe:blockUI widgetVar="chapterBlockUIWidget"
		target="chapterDialogPanel">
		<h:panelGrid columns="2">
			<p:graphicImage name="images/preloader.gif" library="rioLayout"
				style="vertical-align: middle;" />
			<h:outputText value="#{messages.label_refresh}"
				style="white-space: nowrap;" />
		</h:panelGrid>
	</pe:blockUI>
	<h:form id="chapterDialogForm">
		<p:panel styleClass="panelDialog">
			<f:facet name="header">
				<p:messages id="msg" showDetail="false" closable="true" />
			</f:facet>
		</p:panel>
		<p:tabView widgetVar="chapterTabView">
			<p:tab title="Chapitre">
				<h:panelGroup layout="block" styleClass="Container">
					<h:panelGroup layout="block" styleClass="Container50 Responsive100">
						<h:panelGroup layout="block"
							styleClass="Container100 Responsive100">
							<p:inputText id="name" value="#{jJChapterBean.chapter.name}"
								required="true" style="margin: 15px;"
								placeholder="#{messages.chapter_create_name_watermark}"
								label="#{messages.specification_chapter_name_label}"
								requiredMessage="#{messages.specification_chapter_name_alert}">
								<f:validateLength maximum="100" />
							</p:inputText>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="EmptyBox10" />
						<h:panelGroup layout="block"
							styleClass="Container100 Responsive100"
							style="min-height: 250px;min-width: 300px;">
							<p:outputLabel
								value="#{messages.specification_chapter_description_label}" />
							<pe:ckEditor id="description" rendered="#{!loginBean.mobile}"
								width="300px" height="200px"
								customConfig="#{request.contextPath}/resources/js/ckEditor.js"
								toolbar="#{imageStreamer.ckEditorToolBar}"
								value="#{jJChapterBean.chapter.description}" required="true"
								requiredMessage="#{messages.specification_chapter_description_alert}" />
							<p:editor id="descriptionMobile" style="width:600px !important"
								rendered="#{loginBean.mobile}"
								value="#{jJChapterBean.chapter.description}" required="true"
								requiredMessage="#{messages.specification_chapter_description_alert}" />
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="Container50 Responsive100">
						<h:panelGroup layout="block"
							styleClass="Container100 Responsive100">
							<p:outputLabel for="parent"
								value="#{messages.specification_chapter_parent_label}" />

							<p:selectOneMenu id="parent"
								value="#{jJChapterBean.parentChapter}" panelStyle="width:140px"
								effect="fade" style="width:160px" filter="true"
								filterMatchMode="startsWith" widgetVar="parentWidget"
								converter="com.starit.janjoonweb.ui.mb.converter.JJChapterConverter">

								<f:selectItem itemValue="#{null}"
									itemLabel="#{messages.specification_create_select_label}" />
								<f:selectItems value="#{jJChapterBean.chapterList}" var="chap"
									itemLabel="#{chap.name}" itemValue="#{chap}" />
								<p:ajax partialSubmit="true"
									onstart="PF('chapterBlockUIWidget').block()"
									oncomplete="PF('chapterBlockUIWidget').unblock()"
									listener="#{jJChapterBean.handleSelectParentChapter()}" />
							</p:selectOneMenu>
						</h:panelGroup>
						<h:panelGroup layout="block" styleClass="EmptyBox20" />
						<h:panelGroup layout="block"
							styleClass="Container100 Responsive100"
							style="min-height: 250px;min-width: 250px;">
							<p:contextMenu id="chapterContextMenu" for="chapterTreeSingle">
								<p:menuitem
									value="#{messages.specification_chapter_edit_menuitem}"
									actionListener="#{jJChapterBean.editChapter}"
									process="@this,chapterTreeSingle" icon="ui-icon-pencil"
									onstart="PF('chapterBlockUIWidget').block()"
									oncomplete="PF('chapterBlockUIWidget').unblock()"
									update=":chapterDialogForm" />
								<p:menuitem
									value="#{messages.specification_chapter_delete_menuitem}"
									actionListener="#{jJChapterBean.deleteChapter}"
									process="@this,chapterTreeSingle" icon="ui-icon-close"
									onstart="PF('chapterBlockUIWidget').block()"
									oncomplete="PF('chapterBlockUIWidget').unblock()"
									update=":chapterDialogForm" />
							</p:contextMenu>
							<p:outputLabel for="chapterTreeSingle"
								value="#{messages.specification_chapter_tree_label}" />
							<p:tree id="chapterTreeSingle" style="width:250px"
								value="#{jJChapterBean.chapterRoot}" var="nodeChapter"
								selectionMode="single"
								selection="#{jJChapterBean.selectedChapterNode}" dynamic="true">
								<p:treeNode>
									<h:outputText value="#{nodeChapter}" />
								</p:treeNode>
							</p:tree>
						</h:panelGroup>
					</h:panelGroup>
					<h:panelGroup layout="block" styleClass="EmptyBox10" />
					<p:commandButton
						value="#{messages.specification_chapter_save_button}"
						action="#{jJChapterBean.save}" update=":chapterDialogForm"
						style="float: right;" onstart="PF('chapterBlockUIWidget').block()"
						oncomplete="PF('chapterBlockUIWidget').unblock()" />
				</h:panelGroup>
			</p:tab>
			<p:tab title="Document">
				<p:panelGrid style="margin-top:10px;height: 450px;width: 950px;">
					<p:row>
						<p:column colspan="3">
							<p:outputLabel for="leftTreeIncorporated"
								style="font-weight: bold;text-decoration: underline;"
								value="#{messages.specification_chapter_unordered_tree}" />
							<p:tree id="leftTreeIncorporated" style="height: 90%;"
								value="#{jJChapterBean.leftRoot}" var="nodeLeft"
								selectionMode="single" styleClass="chapterTree"
								selection="#{jJChapterBean.selectedLeftNode}" draggable="true"
								droppable="true" dragdropScope="demo" cache="false">
								<p:ajax event="dragdrop" listener="#{jJChapterBean.onDragDrop}"
									update=":chapterDialogForm"
									onstart="PF('chapterBlockUIWidget').block()"
									oncomplete="PF('chapterBlockUIWidget').unblock();PF('chapterTabView').select(1);" />
								<p:treeNode>
									<h:outputText value="#{nodeLeft}" />
								</p:treeNode>
							</p:tree>
						</p:column>
						<p:column colspan="3">
							<h3>Drag&amp;Drop</h3>
							<p:graphicImage alt="Transfer" library="images"
								name="transfer.png" />
						</p:column>
						<p:column colspan="3">
							<p:outputLabel for="RightTreeIncorporated"
								style="font-weight: bold;text-decoration: underline;"
								value="#{messages.specification_chapter_ordered_tree}" />
							<p:tree id="RightTreeIncorporated" style="height: 90%;"
								value="#{jJChapterBean.rightRoot}" var="nodeRight"
								selectionMode="single" styleClass="chapterTree"
								selection="#{jJChapterBean.selectedRightNode}" draggable="true"
								droppable="true" dragdropScope="demo" cache="false">
								<p:ajax event="dragdrop" listener="#{jJChapterBean.onDragDrop}"
									update=":chapterDialogForm"
									onstart="PF('chapterBlockUIWidget').block()"
									oncomplete="PF('chapterBlockUIWidget').unblock();PF('chapterTabView').select(1);" />
								<p:treeNode>
									<h:outputText value="#{nodeRight}" />
								</p:treeNode>
							</p:tree>
						</p:column>
					</p:row>
				</p:panelGrid>
			</p:tab>
		</p:tabView>
	</h:form>
</ui:composition>
</html>