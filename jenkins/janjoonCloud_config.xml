<?xml version="1.0" encoding="UTF-8"?>
<maven2-moduleset plugin="maven-plugin@2.7">
  <actions/>
  <description/>
  <logRotator class="hudson.tasks.LogRotator">
    <daysToKeep>-1</daysToKeep>
    <numToKeep>-1</numToKeep>
    <artifactDaysToKeep>-1</artifactDaysToKeep>
    <artifactNumToKeep>20</artifactNumToKeep>
  </logRotator>
  <keepDependencies>false</keepDependencies>
  <properties>
    <com.sonyericsson.rebuild.RebuildSettings plugin="rebuild@1.22">
      <autoRebuild>false</autoRebuild>
    </com.sonyericsson.rebuild.RebuildSettings>
  </properties>
  <scm class="hudson.scm.SubversionSCM" plugin="subversion@1.54">
    <locations>
      <hudson.scm.SubversionSCM_-ModuleLocation>
        <remote>https://www.janjoon.com/svn/janjoon/trunk</remote>
        <local>.</local>
        <depthOption>infinity</depthOption>
        <ignoreExternalsOption>false</ignoreExternalsOption>
      </hudson.scm.SubversionSCM_-ModuleLocation>
    </locations>
    <excludedRegions/>
    <includedRegions/>
    <excludedUsers/>
    <excludedRevprop/>
    <excludedCommitMessages/>
    <workspaceUpdater class="hudson.scm.subversion.UpdateWithRevertUpdater"/>
    <ignoreDirPropChanges>false</ignoreDirPropChanges>
    <filterChangelog>false</filterChangelog>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers>
    <hudson.triggers.SCMTrigger>
      <spec>* * 1 1-12 *</spec>
      <ignorePostCommitHooks>false</ignorePostCommitHooks>
    </hudson.triggers.SCMTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <rootModule>
    <groupId>com.starit.janjoonweb</groupId>
    <artifactId>janjoon</artifactId>
  </rootModule>
  <goals>clean install -DskipTests=true -Dbuild.number=$SVN_REVISION</goals>
  <mavenOpts>-Xmx2000M -XX:MaxPermSize=1000M</mavenOpts>
  <aggregatorStyleBuild>true</aggregatorStyleBuild>
  <incrementalBuild>false</incrementalBuild>
  <ignoreUpstremChanges>false</ignoreUpstremChanges>
  <archivingDisabled>false</archivingDisabled>
  <siteArchivingDisabled>false</siteArchivingDisabled>
  <fingerprintingDisabled>false</fingerprintingDisabled>
  <resolveDependencies>false</resolveDependencies>
  <processPlugins>false</processPlugins>
  <mavenValidationLevel>-1</mavenValidationLevel>
  <runHeadless>false</runHeadless>
  <disableTriggerDownstreamProjects>false</disableTriggerDownstreamProjects>
  <blockTriggerWhenBuilding>true</blockTriggerWhenBuilding>
  <settings class="jenkins.mvn.DefaultSettingsProvider"/>
  <globalSettings class="jenkins.mvn.DefaultGlobalSettingsProvider"/>
  <reporters>
    <hudson.maven.reporters.MavenMailer>
      <recipients>ajaspart@starit.fr</recipients>
      <dontNotifyEveryUnstableBuild>false</dontNotifyEveryUnstableBuild>
      <sendToIndividuals>false</sendToIndividuals>
      <perModuleEmail>true</perModuleEmail>
    </hudson.maven.reporters.MavenMailer>
  </reporters>
  <publishers>
    <hudson.tasks.ArtifactArchiver>
      <artifacts>janjoon-ui/target/*.zip</artifacts>
      <allowEmptyArchive>false</allowEmptyArchive>
      <onlyIfSuccessful>false</onlyIfSuccessful>
      <fingerprint>false</fingerprint>
      <defaultExcludes>true</defaultExcludes>
    </hudson.tasks.ArtifactArchiver>
    <hudson.plugins.emailext.ExtendedEmailPublisher plugin="email-ext@2.38.2">
      <recipientList>$DEFAULT_RECIPIENTS</recipientList>
      <configuredTriggers>
        <hudson.plugins.emailext.plugins.trigger.AlwaysTrigger>
          <email>
            <recipientList>ajaspart@starit.fr</recipientList>
            <subject>$PROJECT_DEFAULT_SUBJECT</subject>
            <body>$PROJECT_DEFAULT_CONTENT</body>
            <recipientProviders>
              <hudson.plugins.emailext.plugins.recipients.DevelopersRecipientProvider/>
              <hudson.plugins.emailext.plugins.recipients.ListRecipientProvider/>
            </recipientProviders>
            <attachmentsPattern/>
            <attachBuildLog>false</attachBuildLog>
            <compressBuildLog>false</compressBuildLog>
            <replyTo>$PROJECT_DEFAULT_REPLYTO</replyTo>
            <contentType>project</contentType>
          </email>
        </hudson.plugins.emailext.plugins.trigger.AlwaysTrigger>
      </configuredTriggers>
      <contentType>text/html</contentType>
      <defaultSubject>$DEFAULT_SUBJECT</defaultSubject>
      <defaultContent>&lt;img src="https://www.starit.fr/prestashop/img/janjoon_logo.png"/&gt;&lt;br/&gt;
In order to test the product, please connect onto : https://www.starit.fr/intern/pages/login.jsf&lt;br/&gt;
&lt;br/&gt;
&lt;b&gt;Change log&lt;/b&gt; :&lt;br/&gt;
&lt;pre&gt;${CHANGES, showPaths=true}&lt;/pre&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;pre&gt;$DEFAULT_CONTENT   $BUILD_TAG&lt;/pre&gt;&lt;br/&gt;</defaultContent>
      <attachmentsPattern/>
      <presendScript>$DEFAULT_PRESEND_SCRIPT</presendScript>
      <attachBuildLog>false</attachBuildLog>
      <compressBuildLog>false</compressBuildLog>
      <replyTo>$DEFAULT_REPLYTO</replyTo>
      <saveOutput>false</saveOutput>
    </hudson.plugins.emailext.ExtendedEmailPublisher>
  </publishers>
  <buildWrappers/>
  <prebuilders>
    <hudson.tasks.Shell>
      <command>find . -name "*.xhtml" -exec sed -i "s/BUILD_NUMBER/$SVN_REVISION/g" '{}' \;
find . -name "*.properties" -exec sed -i "s/BUILD_NUMBER/$SVN_REVISION/g" '{}' \;
find . -name "*.xml" -exec sed -i "s/BUILD_NUMBER/$SVN_REVISION/g" '{}' \;
find . -name "*.bat" -exec sed -i "s/BUILD_NUMBER/$SVN_REVISION/g" '{}' \;
find . -name "*.sh" -exec sed -i "s/BUILD_NUMBER/$SVN_REVISION/g" '{}' \;</command>
    </hudson.tasks.Shell>
  </prebuilders>
  <postbuilders>
    <hudson.tasks.Shell>
      <command>curl -k --data "mail=ajaspart%40starit.fr&amp;password=glglgl.123&amp;product=janjoon-website&amp;version=trunk&amp;build=3.0.$SVN_REVISION&amp;svnVersion=$BUILD_NUMBER" https://www.starit.fr/intern/rest/build/createBuild</command>
    </hudson.tasks.Shell>
    <hudson.tasks.Shell>
      <command>cp -rf /var/lib/jenkins/jobs/janjoonCloud/workspace/janjoon-ui/target/janjoon-ui-3.0-$SVN_REVISION-distrib.zip /tmp/
ssh jj_starit@localhost cp -rf /tmp/janjoon-ui-3.0-$SVN_REVISION-distrib.zip /home/jj_starit/
ssh jj_starit@localhost /usr/sbin/migrate actual $SVN_REVISION 9898 intern /home/jj_starit</command>
    </hudson.tasks.Shell>
  </postbuilders>
  <runPostStepsIfResult>
    <name>SUCCESS</name>
    <ordinal>0</ordinal>
    <color>BLUE</color>
    <completeBuild>true</completeBuild>
  </runPostStepsIfResult>
</maven2-moduleset>